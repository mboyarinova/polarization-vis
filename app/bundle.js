!function o(a,s,u){function c(n,t){if(!s[n]){if(!a[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(h)return h(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(t){return c(a[n][1][t]||t)},i,i.exports,o,a,s,u)}return s[n].exports}for(var h="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,n,e){var r,i;r=this,i=function(t){"use strict";function s(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function n(o){var e;return 1===o.length&&(e=o,o=function(t,n){return s(e(t),n)}),{left:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;o(t[i],n)<0?e=1+i:r=i}return e},right:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;0<o(t[i],n)?r=i:e=1+i}return e}}}var e=n(s),y=e.right,r=e.left;function h(t,n){return[t,n]}function c(t){return null===t?NaN:+t}function i(t,n){var e,r,i=t.length,o=0,a=-1,s=0,u=0;if(null==n)for(;++a<i;)isNaN(e=c(t[a]))||(u+=(r=e-s)*(e-(s+=r/++o)));else for(;++a<i;)isNaN(e=c(n(t[a],a,t)))||(u+=(r=e-s)*(e-(s+=r/++o)));if(1<o)return u/(o-1)}function o(t,n){var e=i(t,n);return e?Math.sqrt(e):e}function a(t,n){var e,r,i,o=t.length,a=-1;if(null==n){for(;++a<o;)if(null!=(e=t[a])&&e<=e)for(r=i=e;++a<o;)null!=(e=t[a])&&(e<r&&(r=e),i<e&&(i=e))}else for(;++a<o;)if(null!=(e=n(t[a],a,t))&&e<=e)for(r=i=e;++a<o;)null!=(e=n(t[a],a,t))&&(e<r&&(r=e),i<e&&(i=e));return[r,i]}var u=Array.prototype,l=u.slice,f=u.map;function _(t){return function(){return t}}function g(t){return t}function v(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}var p=Math.sqrt(50),d=Math.sqrt(10),m=Math.sqrt(2);function x(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return 0<=i?(p<=o?10:d<=o?5:m<=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(p<=o?10:d<=o?5:m<=o?2:1)}function b(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return p<=o?i*=10:d<=o?i*=5:m<=o&&(i*=2),n<t?-i:i}function w(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function M(t,n,e){if(null==e&&(e=c),r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(1<=n)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),a=+e(t[o],o,t);return a+(+e(t[o+1],o+1,t)-a)*(i-o)}}function k(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e<=e)for(r=e;++o<i;)null!=(e=t[o])&&e<r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e<=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e<r&&(r=e);return r}function T(t){if(!(i=t.length))return[];for(var n=-1,e=k(t,N),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r}function N(t){return t.length}t.bisect=y,t.bisectRight=y,t.bisectLeft=r,t.ascending=s,t.bisector=n,t.cross=function(t,n,e){var r,i,o,a,s=t.length,u=n.length,c=new Array(s*u);for(null==e&&(e=h),r=o=0;r<s;++r)for(a=t[r],i=0;i<u;++i,++o)c[o]=e(a,n[i]);return c},t.descending=function(t,n){return n<t?-1:t<n?1:t<=n?0:NaN},t.deviation=o,t.extent=a,t.histogram=function(){var f=g,p=a,d=w;function n(t){for(var n,e=t.length,r=new Array(e),i=0;i<e;++i)r[i]=f(t[i],i,t);var o=p(r),a=o[0],s=o[1],u=d(r,a,s);Array.isArray(u)||(u=b(a,s,u),u=v(Math.ceil(a/u)*u,s,u));for(var c=u.length;u[0]<=a;)u.shift(),--c;for(;u[c-1]>s;)u.pop(),--c;var h,l=new Array(c+1);for(i=0;i<=c;++i)(h=l[i]=[]).x0=0<i?u[i-1]:a,h.x1=i<c?u[i]:s;for(i=0;i<e;++i)a<=(n=r[i])&&n<=s&&l[y(u,n,0,c)].push(t[i]);return l}return n.value=function(t){return arguments.length?(f="function"==typeof t?t:_(t),n):f},n.domain=function(t){return arguments.length?(p="function"==typeof t?t:_([t[0],t[1]]),n):p},n.thresholds=function(t){return arguments.length?(d="function"==typeof t?t:Array.isArray(t)?_(l.call(t)):_(t),n):d},n},t.thresholdFreedmanDiaconis=function(t,n,e){return t=f.call(t,c).sort(s),Math.ceil((e-n)/(2*(M(t,.75)-M(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,n,e){return Math.ceil((e-n)/(3.5*o(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=w,t.max=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e<=e)for(r=e;++o<i;)null!=(e=t[o])&&r<e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e<=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r<e&&(r=e);return r},t.mean=function(t,n){var e,r=t.length,i=r,o=-1,a=0;if(null==n)for(;++o<r;)isNaN(e=c(t[o]))?--i:a+=e;else for(;++o<r;)isNaN(e=c(n(t[o],o,t)))?--i:a+=e;if(i)return a/i},t.median=function(t,n){var e,r=t.length,i=-1,o=[];if(null==n)for(;++i<r;)isNaN(e=c(t[i]))||o.push(e);else for(;++i<r;)isNaN(e=c(n(t[i],i,t)))||o.push(e);return M(o.sort(s),.5)},t.merge=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);0<=--i;)for(n=(r=t[i]).length;0<=--n;)e[--a]=r[n];return e},t.min=k,t.pairs=function(t,n){null==n&&(n=h);for(var e=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);e<r;)o[e]=n(i,i=t[++e]);return o},t.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},t.quantile=M,t.range=v,t.scan=function(t,n){if(e=t.length){var e,r,i=0,o=0,a=t[o];for(null==n&&(n=s);++i<e;)(n(r=t[i],a)<0||0!==n(a,a))&&(a=r,o=i);return 0===n(a,a)?o:void 0}},t.shuffle=function(t,n,e){for(var r,i,o=(null==e?t.length:e)-(n=null==n?0:+n);o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},t.sum=function(t,n){var e,r=t.length,i=-1,o=0;if(null==n)for(;++i<r;)(e=+t[i])&&(o+=e);else for(;++i<r;)(e=+n(t[i],i,t))&&(o+=e);return o},t.ticks=function(t,n,e){var r,i,o,a,s=-1;if(e=+e,(t=+t)===(n=+n)&&0<e)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=x(t,n,e))||!isFinite(a))return[];if(0<a)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o},t.tickIncrement=x,t.tickStep=b,t.transpose=T,t.variance=i,t.zip=function(){return T(arguments)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],2:[function(t,n,e){var r,i;r=this,i=function(t){"use strict";var e=Array.prototype.slice;function N(t){return t}var S=1,A=2,C=3,j=4,P=1e-6;function r(t){return"translate("+(t+.5)+",0)"}function i(t){return"translate(0,"+(t+.5)+")"}function E(){return!this.__axis}function n(y,_){var g=[],v=null,m=null,x=6,b=6,w=3,M=y===S||y===j?-1:1,k=y===j||y===A?"x":"y",T=y===S||y===C?r:i;function n(t){var n=null==v?_.ticks?_.ticks.apply(_,g):_.domain():v,e=null==m?_.tickFormat?_.tickFormat.apply(_,g):N:m,r=Math.max(x,0)+w,i=_.range(),o=+i[0]+.5,a=+i[i.length-1]+.5,s=(_.bandwidth?function(n){var e=Math.max(0,n.bandwidth()-1)/2;return n.round()&&(e=Math.round(e)),function(t){return+n(t)+e}}:function(n){return function(t){return+n(t)}})(_.copy()),u=t.selection?t.selection():t,c=u.selectAll(".domain").data([null]),h=(d=u.selectAll(".tick").data(n,_).order()).exit(),l=d.enter().append("g").attr("class","tick"),f=d.select("line"),p=d.select("text"),c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),d=d.merge(l),f=f.merge(l.append("line").attr("stroke","currentColor").attr(k+"2",M*x)),p=p.merge(l.append("text").attr("fill","currentColor").attr(k,M*r).attr("dy",y===S?"0em":y===C?"0.71em":"0.32em"));t!==u&&(c=c.transition(t),d=d.transition(t),f=f.transition(t),p=p.transition(t),h=h.transition(t).attr("opacity",P).attr("transform",function(t){return isFinite(t=s(t))?T(t):this.getAttribute("transform")}),l.attr("opacity",P).attr("transform",function(t){var n=this.parentNode.__axis;return T(n&&isFinite(n=n(t))?n:s(t))})),h.remove(),c.attr("d",y===j||y==A?b?"M"+M*b+","+o+"H0.5V"+a+"H"+M*b:"M0.5,"+o+"V"+a:b?"M"+o+","+M*b+"V0.5H"+a+"V"+M*b:"M"+o+",0.5H"+a),d.attr("opacity",1).attr("transform",function(t){return T(s(t))}),f.attr(k+"2",M*x),p.attr(k,M*r).text(e),u.filter(E).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",y===A?"start":y===j?"end":"middle"),u.each(function(){this.__axis=s})}return n.scale=function(t){return arguments.length?(_=t,n):_},n.ticks=function(){return g=e.call(arguments),n},n.tickArguments=function(t){return arguments.length?(g=null==t?[]:e.call(t),n):g.slice()},n.tickValues=function(t){return arguments.length?(v=null==t?null:e.call(t),n):v&&v.slice()},n.tickFormat=function(t){return arguments.length?(m=t,n):m},n.tickSize=function(t){return arguments.length?(x=b=+t,n):x},n.tickSizeInner=function(t){return arguments.length?(x=+t,n):x},n.tickSizeOuter=function(t){return arguments.length?(b=+t,n):b},n.tickPadding=function(t){return arguments.length?(w=+t,n):w},n}t.axisTop=function(t){return n(S,t)},t.axisRight=function(t){return n(A,t)},t.axisBottom=function(t){return n(C,t)},t.axisLeft=function(t){return n(j,t)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],3:[function(t,n,e){var r,i;r=this,i=function(t){"use strict";var e="$";function s(){}function _(t,n){var e=new s;if(t instanceof s)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}function r(){return{}}function i(t,n,e){t[n]=e}function o(){return _()}function u(t,n,e){t.set(n,e)}function a(){}s.prototype=_.prototype={constructor:s,has:function(t){return e+t in this},get:function(t){return this[e+t]},set:function(t,n){return this[e+t]=n,this},remove:function(t){var n=e+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===e&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===e&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===e&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===e&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===e&&++t;return t},empty:function(){for(var t in this)if(t[0]===e)return!1;return!0},each:function(t){for(var n in this)n[0]===e&&t(this[n],n.slice(1),this)}};var n=_.prototype;function c(t,n){var e=new a;if(t instanceof a)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}a.prototype=c.prototype={constructor:a,has:n.has,add:function(t){return this[e+(t+="")]=t,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each},t.nest=function(){var f,p,n,d=[],a=[];function y(t,e,r,i){if(e>=d.length)return null!=f&&t.sort(f),null!=p?p(t):t;for(var n,o,a,s=-1,u=t.length,c=d[e++],h=_(),l=r();++s<u;)(a=h.get(n=c(o=t[s])+""))?a.push(o):h.set(n,[o]);return h.each(function(t,n){i(l,n,y(t,e,r,i))}),l}return n={object:function(t){return y(t,0,r,i)},map:function(t){return y(t,0,o,u)},entries:function(t){return function e(t,r){if(++r>d.length)return t;var i,o=a[r-1];return null!=p&&r>=d.length?i=t.entries():(i=[],t.each(function(t,n){i.push({key:n,values:e(t,r)})})),null!=o?i.sort(function(t,n){return o(t.key,n.key)}):i}(y(t,0,o,u),0)},key:function(t){return d.push(t),n},sortKeys:function(t){return a[d.length-1]=t,n},sortValues:function(t){return f=t,n},rollup:function(t){return p=t,n}}},t.set=c,t.map=_,t.keys=function(t){var n=[];for(var e in t)n.push(e);return n},t.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},t.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],4:[function(t,n,e){var r,i;r=this,i=function(t){"use strict";function n(t,n,e){(t.prototype=n.prototype=e).constructor=t}function e(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function c(){}var r=1/.7,i="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s=/^#([0-9a-f]{3,8})$/,u=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),h=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),l=new RegExp("^rgba\\("+[i,i,i,o]+"\\)$"),f=new RegExp("^rgba\\("+[a,a,a,o]+"\\)$"),p=new RegExp("^hsl\\("+[o,a,a]+"\\)$"),d=new RegExp("^hsla\\("+[o,a,a,o]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function v(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=s.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?m(n):3===e?new M(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?x(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?x(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=u.exec(t))?new M(n[1],n[2],n[3],1):(n=h.exec(t))?new M(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=l.exec(t))?x(n[1],n[2],n[3],n[4]):(n=f.exec(t))?x(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=p.exec(t))?S(n[1],n[2]/100,n[3]/100,1):(n=d.exec(t))?S(n[1],n[2]/100,n[3]/100,n[4]):y.hasOwnProperty(t)?m(y[t]):"transparent"===t?new M(NaN,NaN,NaN,0):null}function m(t){return new M(t>>16&255,t>>8&255,255&t,1)}function x(t,n,e,r){return r<=0&&(t=n=e=NaN),new M(t,n,e,r)}function b(t){return t instanceof c||(t=v(t)),t?new M((t=t.rgb()).r,t.g,t.b,t.opacity):new M}function w(t,n,e,r){return 1===arguments.length?b(t):new M(t,n,e,null==r?1:r)}function M(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function k(){return"#"+N(this.r)+N(this.g)+N(this.b)}function T(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function N(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function S(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||1<=e?t=n=NaN:n<=0&&(t=NaN),new j(t,n,e,r)}function A(t){if(t instanceof j)return new j(t.h,t.s,t.l,t.opacity);if(t instanceof c||(t=v(t)),!t)return new j;if(t instanceof j)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=n===o?(e-r)/s+6*(e<r):e===o?(r-n)/s+2:(n-e)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=0<u&&u<1?0:a,new j(a,s,u,t.opacity)}function C(t,n,e,r){return 1===arguments.length?A(t):new j(t,n,e,null==r?1:r)}function j(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function P(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}n(c,v,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:_,formatHex:_,formatHsl:function(){return A(this).formatHsl()},formatRgb:g,toString:g}),n(M,w,e(c,{brighter:function(t){return t=null==t?r:Math.pow(r,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k,formatHex:k,formatRgb:T,toString:T})),n(j,C,e(c,{brighter:function(t){return t=null==t?r:Math.pow(r,t),new j(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new j(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new M(P(240<=t?t-240:120+t,i,r),P(t,i,r),P(t<120?240+t:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var E=Math.PI/180,O=180/Math.PI,D=.96422,q=1,R=.82521,U=4/29,F=6/29,L=3*F*F,Y=F*F*F;function z(t){if(t instanceof I)return new I(t.l,t.a,t.b,t.opacity);if(t instanceof Q)return J(t);t instanceof M||(t=b(t));var n,e,r=W(t.r),i=W(t.g),o=W(t.b),a=B((.2225045*r+.7168786*i+.0606169*o)/q);return r===i&&i===o?n=e=a:(n=B((.4360747*r+.3850649*i+.1430804*o)/D),e=B((.0139322*r+.0971045*i+.7141733*o)/R)),new I(116*a-16,500*(n-a),200*(a-e),t.opacity)}function H(t,n,e,r){return 1===arguments.length?z(t):new I(t,n,e,null==r?1:r)}function I(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function B(t){return Y<t?Math.pow(t,1/3):t/L+U}function X(t){return F<t?t*t*t:L*(t-U)}function V(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function W(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Z(t){if(t instanceof Q)return new Q(t.h,t.c,t.l,t.opacity);if(t instanceof I||(t=z(t)),0===t.a&&0===t.b)return new Q(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*O;return new Q(n<0?360+n:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function $(t,n,e,r){return 1===arguments.length?Z(t):new Q(t,n,e,null==r?1:r)}function Q(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function J(t){if(isNaN(t.h))return new I(t.l,0,0,t.opacity);var n=t.h*E;return new I(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}n(I,H,e(c,{brighter:function(t){return new I(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new I(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new M(V(3.1338561*(n=D*X(n))-1.6168667*(t=q*X(t))-.4906146*(e=R*X(e))),V(-.9787684*n+1.9161415*t+.033454*e),V(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),n(Q,$,e(c,{brighter:function(t){return new Q(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Q(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return J(this).rgb()}}));var G=1.78277,K=-.29227,tt=-.90649,nt=1.97294,et=nt*tt,rt=nt*G,it=G*K- -.14861*tt;function ot(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof at)return new at(t.h,t.s,t.l,t.opacity);t instanceof M||(t=b(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(it*r+et*n-rt*e)/(it+et-rt),o=r-i,a=(nt*(e-i)-K*o)/tt,s=Math.sqrt(a*a+o*o)/(nt*i*(1-i)),u=s?Math.atan2(a,o)*O-120:NaN;return new at(u<0?u+360:u,s,i,t.opacity)}(t):new at(t,n,e,null==r?1:r)}function at(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}n(at,ot,e(c,{brighter:function(t){return t=null==t?r:Math.pow(r,t),new at(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new at(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*E,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new M(255*(n+e*(-.14861*r+G*i)),255*(n+e*(K*r+tt*i)),255*(n+nt*r*e),this.opacity)}})),t.color=v,t.cubehelix=ot,t.gray=function(t,n){return new I(t,0,0,null==n?1:n)},t.hcl=$,t.hsl=C,t.lab=H,t.lch=function(t,n,e,r){return 1===arguments.length?Z(t):new Q(e,n,t,null==r?1:r)},t.rgb=w,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],5:[function(t,n,e){var r,i;r=this,i=function(t){"use strict";var f={},p={};function u(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function s(t){var e=Object.create(null),r=[];return t.forEach(function(t){for(var n in t)n in e||r.push(e[n]=n)}),r}function a(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function c(t){var n,e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+a(-n,6):9999<n?"+"+a(n,6):a(n,4))+"-"+a(t.getUTCMonth()+1,2)+"-"+a(t.getUTCDate(),2)+(o?"T"+a(e,2)+":"+a(r,2)+":"+a(i,2)+"."+a(o,3)+"Z":i?"T"+a(e,2)+":"+a(r,2)+":"+a(i,2)+"Z":r||e?"T"+a(e,2)+":"+a(r,2)+"Z":"")}function n(r){var n=new RegExp('["'+r+"\n\r]"),l=r.charCodeAt(0);function e(r,t){var n,e=[],i=r.length,o=0,a=0,s=i<=0,u=!1;function c(){if(s)return p;if(u)return u=!1,f;var t,n,e=o;if(34===r.charCodeAt(e)){for(;o++<i&&34!==r.charCodeAt(o)||34===r.charCodeAt(++o););return(t=o)>=i?s=!0:10===(n=r.charCodeAt(o++))?u=!0:13===n&&(u=!0,10===r.charCodeAt(o)&&++o),r.slice(e+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(n=r.charCodeAt(t=o++)))u=!0;else if(13===n)u=!0,10===r.charCodeAt(o)&&++o;else if(n!==l)continue;return r.slice(e,t)}return s=!0,r.slice(e,i)}for(10===r.charCodeAt(i-1)&&--i,13===r.charCodeAt(i-1)&&--i;(n=c())!==p;){for(var h=[];n!==f&&n!==p;)h.push(n),n=c();t&&null==(h=t(h,a++))||e.push(h)}return e}function i(t,e){return t.map(function(n){return e.map(function(t){return a(n[t])}).join(r)})}function o(t){return t.map(a).join(r)}function a(t){return null==t?"":t instanceof Date?c(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,o){var a,s,n=e(t,function(t,n){return a?a(t,n-1):(s=t,void(a=o?(r=o,i=u(e=t),function(t,n){return r(i(t),n,e)}):u(t)));var e,r,i});return n.columns=s||[],n},parseRows:e,format:function(t,n){return null==n&&(n=s(t)),[n.map(a).join(r)].concat(i(t,n)).join("\n")},formatBody:function(t,n){return null==n&&(n=s(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var e=n(","),r=e.parse,i=e.parseRows,o=e.format,h=e.formatBody,l=e.formatRows,d=e.formatRow,y=e.formatValue,_=n("\t"),g=_.parse,v=_.parseRows,m=_.format,x=_.formatBody,b=_.formatRows,w=_.formatRow,M=_.formatValue;var k=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();t.autoType=function(t){for(var n in t){var e,r,i=t[n].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(e=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;k&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=e;else i=null;t[n]=i}return t},t.csvFormat=o,t.csvFormatBody=h,t.csvFormatRow=d,t.csvFormatRows=l,t.csvFormatValue=y,t.csvParse=r,t.csvParseRows=i,t.dsvFormat=n,t.tsvFormat=m,t.tsvFormatBody=x,t.tsvFormatRow=w,t.tsvFormatRows=b,t.tsvFormatValue=M,t.tsvParse=g,t.tsvParseRows=v,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],6:[function(t,n,e){var r,i;r=this,i=function(t,o){"use strict";function e(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function i(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function a(t,n){return fetch(t,n).then(i)}function n(r){return function(t,n,e){return 2===arguments.length&&"function"==typeof n&&(e=n,n=void 0),a(t,n).then(function(t){return r(t,e)})}}var s=n(o.csvParse),u=n(o.tsvParse);function c(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function h(e){return function(t,n){return a(t,n).then(function(t){return(new DOMParser).parseFromString(t,e)})}}var l=h("application/xml"),f=h("text/html"),p=h("image/svg+xml");t.blob=function(t,n){return fetch(t,n).then(e)},t.buffer=function(t,n){return fetch(t,n).then(r)},t.csv=s,t.dsv=function(t,n,e,r){3===arguments.length&&"function"==typeof e&&(r=e,e=void 0);var i=o.dsvFormat(t);return a(n,e).then(function(t){return i.parse(t,r)})},t.html=f,t.image=function(i,o){return new Promise(function(t,n){var e=new Image;for(var r in o)e[r]=o[r];e.onerror=n,e.onload=function(){t(e)},e.src=i})},t.json=function(t,n){return fetch(t,n).then(c)},t.svg=p,t.text=a,t.tsv=u,t.xml=l,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e,t("d3-dsv")):"function"==typeof define&&define.amd?define(["exports","d3-dsv"],i):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-dsv":5}],7:[function(t,n,e){var r,i;r=this,i=function(n){"use strict";function s(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[1<r.length?r[0]+r.slice(2):r,+t.slice(e+1)]}function c(t){return(t=s(Math.abs(t)))?t[1]:NaN}var S,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function A(t){if(!(n=e.exec(t)))throw new Error("invalid format: "+t);var n;return new r({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function r(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function i(t,n){var e=s(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}A.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var C={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return i(100*t,n)},r:i,s:function(t,n){var e=s(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(S=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:a<o?r+new Array(o-a+1).join("0"):0<o?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+s(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function h(t){return t}var o,l=Array.prototype.map,j=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function a(t){var n,s,u,w=void 0===t.grouping||void 0===t.thousands?h:(s=l.call(t.grouping,Number),u=t.thousands+"",function(t,n){for(var e=t.length,r=[],i=0,o=s[0],a=0;0<e&&0<o&&(n<a+o+1&&(o=Math.max(1,n-a)),r.push(t.substring(e-=o,e+o)),!((a+=o+1)>n));)o=s[i=(i+1)%s.length];return r.reverse().join(u)}),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",M=void 0===t.decimal?".":t.decimal+"",k=void 0===t.numerals?h:(n=l.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return n[+t]})}),o=void 0===t.percent?"%":t.percent+"",T=void 0===t.minus?"-":t.minus+"",N=void 0===t.nan?"NaN":t.nan+"";function a(t){var c=(t=A(t)).fill,h=t.align,l=t.sign,n=t.symbol,f=t.zero,p=t.width,d=t.comma,y=t.precision,_=t.trim,g=t.type;"n"===g?(d=!0,g="g"):C[g]||(void 0===y&&(y=12),_=!0,g="g"),(f||"0"===c&&"="===h)&&(f=!0,c="0",h="=");var v="$"===n?r:"#"===n&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",m="$"===n?i:/[%p]/.test(g)?o:"",x=C[g],b=/[defgprs%]/.test(g);function e(t){var n,e,r,i=v,o=m;if("c"===g)o=x(t)+o,t="";else{var a=(t=+t)<0||1/t<0;if(t=isNaN(t)?N:x(Math.abs(t),y),_&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(n+1):t}(t)),a&&0==+t&&"+"!==l&&(a=!1),i=(a?"("===l?l:T:"-"===l||"("===l?"":l)+i,o=("s"===g?j[8+S/3]:"")+o+(a&&"("===l?")":""),b)for(n=-1,e=t.length;++n<e;)if((r=t.charCodeAt(n))<48||57<r){o=(46===r?M+t.slice(n+1):t.slice(n))+o,t=t.slice(0,n);break}}d&&!f&&(t=w(t,1/0));var s=i.length+t.length+o.length,u=s<p?new Array(p-s+1).join(c):"";switch(d&&f&&(t=w(u+t,u.length?p-o.length:1/0),u=""),h){case"<":t=i+t+o+u;break;case"=":t=i+u+t+o;break;case"^":t=u.slice(0,s=u.length>>1)+i+t+o+u.slice(s);break;default:t=u+i+t+o}return k(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),e.toString=function(){return t+""},e}return{format:a,formatPrefix:function(t,n){var e=a(((t=A(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(c(n)/3))),i=Math.pow(10,-r),o=j[8+r/3];return function(t){return e(i*t)+o}}}}function t(t){return o=a(t),n.format=o.format,n.formatPrefix=o.formatPrefix,o}t({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),n.FormatSpecifier=r,n.formatDefaultLocale=t,n.formatLocale=a,n.formatSpecifier=A,n.precisionFixed=function(t){return Math.max(0,-c(Math.abs(t)))},n.precisionPrefix=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(c(n)/3)))-c(Math.abs(t)))},n.precisionRound=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,c(n)-c(t))+1},Object.defineProperty(n,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],8:[function(t,n,e){var r,i;r=this,i=function(t,u){"use strict";function c(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function n(a){var s=a.length-1;return function(t){var n=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),e=a[n],r=a[n+1],i=0<n?a[n-1]:2*e-r,o=n<s-1?a[n+2]:2*r-e;return c((t-n/s)*s,i,e,r,o)}}function e(a){var s=a.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*s),e=a[(n+s-1)%s],r=a[n%s],i=a[(n+1)%s],o=a[(n+2)%s];return c((t-n/s)*s,e,r,i,o)}}function a(t){return function(){return t}}function r(n,e){return function(t){return n+t*e}}function i(t,n){var e=n-t;return e?r(t,180<e||e<-180?e-360*Math.round(e/360):e):a(isNaN(t)?n:t)}function o(o){return 1==(o=+o)?h:function(t,n){return n-t?(e=t,r=n,i=o,e=Math.pow(e,i),r=Math.pow(r,i)-e,i=1/i,function(t){return Math.pow(e+t*r,i)}):a(isNaN(t)?n:t);var e,r,i}}function h(t,n){var e=n-t;return e?r(t,e):a(isNaN(t)?n:t)}var s=function t(n){var a=o(n);function e(n,t){var e=a((n=u.rgb(n)).r,(t=u.rgb(t)).r),r=a(n.g,t.g),i=a(n.b,t.b),o=h(n.opacity,t.opacity);return function(t){return n.r=e(t),n.g=r(t),n.b=i(t),n.opacity=o(t),n+""}}return e.gamma=t,e}(1);function l(s){return function(t){for(var n,e=t.length,r=new Array(e),i=new Array(e),o=new Array(e),a=0;a<e;++a)n=u.rgb(t[a]),r[a]=n.r||0,i[a]=n.g||0,o[a]=n.b||0;return r=s(r),i=s(i),o=s(o),n.opacity=1,function(t){return n.r=r(t),n.g=i(t),n.b=o(t),n+""}}}var f=l(n),p=l(e);function d(n,e){e=e||[];var r,i=n?Math.min(e.length,n.length):0,o=e.slice();return function(t){for(r=0;r<i;++r)o[r]=n[r]*(1-t)+e[r]*t;return o}}function y(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _(t,n){for(var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),a=0;a<r;++a)i[a]=w(t[a],n[a]);for(;a<e;++a)o[a]=n[a];return function(t){for(a=0;a<r;++a)o[a]=i[a](t);return o}}function g(n,e){var r=new Date;return n=+n,e=+e,function(t){return r.setTime(n*(1-t)+e*t),r}}function P(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function v(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=w(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var m=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x=new RegExp(m.source,"g");function b(t,r){var n,e,i,o,a,s=m.lastIndex=x.lastIndex=0,u=-1,c=[],h=[];for(t+="",r+="";(n=m.exec(t))&&(e=x.exec(r));)(i=e.index)>s&&(i=r.slice(s,i),c[u]?c[u]+=i:c[++u]=i),(n=n[0])===(e=e[0])?c[u]?c[u]+=e:c[++u]=e:(c[++u]=null,h.push({i:u,x:P(n,e)})),s=x.lastIndex;return s<r.length&&(i=r.slice(s),c[u]?c[u]+=i:c[++u]=i),c.length<2?h[0]?(a=h[0].x,function(t){return a(t)+""}):(o=r,function(){return o}):(r=h.length,function(t){for(var n,e=0;e<r;++e)c[(n=h[e]).i]=n.x(t);return c.join("")})}function w(t,n){var e,r=typeof n;return null==n||"boolean"==r?a(n):("number"==r?P:"string"==r?(e=u.color(n))?(n=e,s):b:n instanceof u.color?s:n instanceof Date?g:y(n)?d:Array.isArray(n)?_:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?v:P)(t,n)}var M,k,T,N,S=180/Math.PI,A={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function C(t,n,e,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*S,skewX:Math.atan(u)*S,scaleX:a,scaleY:s}}function j(N,S,A,C){function j(t){return t.length?t.pop()+" ":""}return function(t,n){var e,r,i,o,a,s,u,c,h,l,f,p,d,y,_,g,v,m,x,b,w,M,k=[],T=[];return t=N(t),n=N(n),e=t.translateX,r=t.translateY,i=n.translateX,o=n.translateY,a=k,s=T,e!==i||r!==o?(u=a.push("translate(",null,S,null,A),s.push({i:u-4,x:P(e,i)},{i:u-2,x:P(r,o)})):(i||o)&&a.push("translate("+i+S+o+A),c=t.rotate,h=n.rotate,l=k,f=T,c!==h?(180<c-h?h+=360:180<h-c&&(c+=360),f.push({i:l.push(j(l)+"rotate(",null,C)-2,x:P(c,h)})):h&&l.push(j(l)+"rotate("+h+C),p=t.skewX,d=n.skewX,y=k,_=T,p!==d?_.push({i:y.push(j(y)+"skewX(",null,C)-2,x:P(p,d)}):d&&y.push(j(y)+"skewX("+d+C),g=t.scaleX,v=t.scaleY,m=n.scaleX,x=n.scaleY,b=k,w=T,g!==m||v!==x?(M=b.push(j(b)+"scale(",null,",",null,")"),w.push({i:M-4,x:P(g,m)},{i:M-2,x:P(v,x)})):1===m&&1===x||b.push(j(b)+"scale("+m+","+x+")"),t=n=null,function(t){for(var n,e=-1,r=T.length;++e<r;)k[(n=T[e]).i]=n.x(t);return k.join("")}}}var E=j(function(t){return"none"===t?A:(M||(M=document.createElement("DIV"),k=document.documentElement,T=document.defaultView),M.style.transform=t,t=T.getComputedStyle(k.appendChild(M),null).getPropertyValue("transform"),k.removeChild(M),C(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),O=j(function(t){return null==t?A:((N=N||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=N.transform.baseVal.consolidate())?C((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):A)},", ",")",")"),D=Math.SQRT2;function q(t){return((t=Math.exp(t))+1/t)/2}function R(a){return function(n,t){var e=a((n=u.hsl(n)).h,(t=u.hsl(t)).h),r=h(n.s,t.s),i=h(n.l,t.l),o=h(n.opacity,t.opacity);return function(t){return n.h=e(t),n.s=r(t),n.l=i(t),n.opacity=o(t),n+""}}}var U=R(i),F=R(h);function L(a){return function(n,t){var e=a((n=u.hcl(n)).h,(t=u.hcl(t)).h),r=h(n.c,t.c),i=h(n.l,t.l),o=h(n.opacity,t.opacity);return function(t){return n.h=e(t),n.c=r(t),n.l=i(t),n.opacity=o(t),n+""}}}var Y=L(i),z=L(h);function H(s){return function t(a){function n(n,t){var e=s((n=u.cubehelix(n)).h,(t=u.cubehelix(t)).h),r=h(n.s,t.s),i=h(n.l,t.l),o=h(n.opacity,t.opacity);return function(t){return n.h=e(t),n.s=r(t),n.l=i(Math.pow(t,a)),n.opacity=o(t),n+""}}return a=+a,n.gamma=t,n}(1)}var I=H(i),B=H(h);t.interpolate=w,t.interpolateArray=function(t,n){return(y(n)?d:_)(t,n)},t.interpolateBasis=n,t.interpolateBasisClosed=e,t.interpolateCubehelix=I,t.interpolateCubehelixLong=B,t.interpolateDate=g,t.interpolateDiscrete=function(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}},t.interpolateHcl=Y,t.interpolateHclLong=z,t.interpolateHsl=U,t.interpolateHslLong=F,t.interpolateHue=function(t,n){var e=i(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}},t.interpolateLab=function(n,t){var e=h((n=u.lab(n)).l,(t=u.lab(t)).l),r=h(n.a,t.a),i=h(n.b,t.b),o=h(n.opacity,t.opacity);return function(t){return n.l=e(t),n.a=r(t),n.b=i(t),n.opacity=o(t),n+""}},t.interpolateNumber=P,t.interpolateNumberArray=d,t.interpolateObject=v,t.interpolateRgb=s,t.interpolateRgbBasis=f,t.interpolateRgbBasisClosed=p,t.interpolateRound=function(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}},t.interpolateString=b,t.interpolateTransformCss=E,t.interpolateTransformSvg=O,t.interpolateZoom=function(t,n){var a,e,r,s,u,i,c=t[0],h=t[1],l=t[2],o=n[0],f=n[1],p=n[2],d=o-c,y=f-h,_=d*d+y*y;return(i=_<1e-12?(u=Math.log(p/l)/D,function(t){return[c+t*d,h+t*y,l*Math.exp(D*t*u)]}):(a=Math.sqrt(_),e=(p*p-l*l+4*_)/(2*l*2*a),r=(p*p-l*l-4*_)/(2*p*2*a),s=Math.log(Math.sqrt(e*e+1)-e),u=(Math.log(Math.sqrt(r*r+1)-r)-s)/D,function(t){var n,e,r=t*u,i=q(s),o=l/(2*a)*(i*(e=D*r+s,((e=Math.exp(2*e))-1)/(e+1))-(n=s,((n=Math.exp(n))-1/n)/2));return[c+o*d,h+o*y,l*i/q(D*r+s)]})).duration=1e3*u,i},t.piecewise=function(t,n){for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[n](t-n)}},t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e,t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],i):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-color":4}],9:[function(t,n,e){var r,i;r=this,i=function(t){"use strict";var b=Math.PI,f=2*b,w=1e-6,p=f-w;function n(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function e(){return new n}n.prototype=e.prototype={constructor:n,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o,a,s,u,c,h,l,f,p,d=this._x1,y=this._y1,_=e-t,g=r-n,v=d-t,m=y-n,x=v*v+m*m;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=n):w<x&&(Math.abs(m*_-g*v)>w&&i?(s=_*_+g*g,u=(o=e-d)*o+(a=r-y)*a,c=Math.sqrt(s),h=Math.sqrt(x),f=(l=i*Math.tan((b-Math.acos((s+x-u)/(2*c*h)))/2))/h,p=l/c,Math.abs(f-1)>w&&(this._+="L"+(t+f*v)+","+(n+f*m)),this._+="A"+i+","+i+",0,0,"+ +(v*a<m*o)+","+(this._x1=t+p*_)+","+(this._y1=n+p*g)):this._+="L"+(this._x1=t)+","+(this._y1=n))},arc:function(t,n,e,r,i,o){t=+t,n=+n,o=!!o;var a=(e=+e)*Math.cos(r),s=e*Math.sin(r),u=t+a,c=n+s,h=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>w||Math.abs(this._y1-c)>w)&&(this._+="L"+u+","+c),e&&(l<0&&(l=l%f+f),p<l?this._+="A"+e+","+e+",0,1,"+h+","+(t-a)+","+(n-s)+"A"+e+","+e+",0,1,"+h+","+(this._x1=u)+","+(this._y1=c):w<l&&(this._+="A"+e+","+e+",0,"+ +(b<=l)+","+h+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}},t.path=e,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],10:[function(t,n,e){var r,i;r=this,i=function(t,u,k,p,s,n,e){"use strict";function d(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function r(t,n){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(n).domain(t)}return this}var i=Array.prototype,T=i.map,y=i.slice,c={name:"implicit"};function _(){var o=u.map(),a=[],r=[],i=c;function s(t){var n=t+"",e=o.get(n);if(!e){if(i!==c)return i;o.set(n,e=a.push(t))}return r[(e-1)%r.length]}return s.domain=function(t){if(!arguments.length)return a.slice();a=[],o=u.map();for(var n,e,r=-1,i=t.length;++r<i;)o.has(e=(n=t[r])+"")||o.set(e,a.push(n));return s},s.range=function(t){return arguments.length?(r=y.call(t),s):r.slice()},s.unknown=function(t){return arguments.length?(i=t,s):i},s.copy=function(){return _(a,r).unknown(i)},d.apply(s,arguments),s}function g(){var o,a,t=_().unknown(void 0),s=t.domain,u=t.range,c=[0,1],h=!1,l=0,f=0,p=.5;function n(){var t=s().length,n=c[1]<c[0],e=c[+n],r=c[1-n];o=(r-e)/Math.max(1,t-l+2*f),h&&(o=Math.floor(o)),e+=(r-e-o*(t-l))*p,a=o*(1-l),h&&(e=Math.round(e),a=Math.round(a));var i=k.range(t).map(function(t){return e+o*t});return u(n?i.reverse():i)}return delete t.unknown,t.domain=function(t){return arguments.length?(s(t),n()):s()},t.range=function(t){return arguments.length?(c=[+t[0],+t[1]],n()):c.slice()},t.rangeRound=function(t){return c=[+t[0],+t[1]],h=!0,n()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(t){return arguments.length?(h=!!t,n()):h},t.padding=function(t){return arguments.length?(l=Math.min(1,f=+t),n()):l},t.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),n()):l},t.paddingOuter=function(t){return arguments.length?(f=+t,n()):f},t.align=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),n()):p},t.copy=function(){return g(s(),c).round(h).paddingInner(l).paddingOuter(f).align(p)},d.apply(n(),arguments)}function v(t){return+t}var m=[0,1];function N(t){return t}function h(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:(t=isNaN(e)?NaN:.5,function(){return t});var t}function x(t){var n,e=t[0],r=t[t.length-1];return r<e&&(n=e,e=r,r=n),function(t){return Math.max(e,Math.min(r,t))}}function b(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1],o=i<r?(r=h(i,r),e(a,o)):(r=h(r,i),e(o,a));return function(t){return o(r(t))}}function w(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=h(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=k.bisect(e,t,1,r)-1;return o[n](i[n](t))}}function S(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function o(){var e,r,n,i,o,a,s=m,u=m,c=p.interpolate,h=N;function l(){return i=2<Math.min(s.length,u.length)?w:b,o=a=null,f}function f(t){return isNaN(t=+t)?n:(o=o||i(s.map(e),u,c))(e(h(t)))}return f.invert=function(t){return h(r((a=a||i(u,s.map(e),p.interpolateNumber))(t)))},f.domain=function(t){return arguments.length?(s=T.call(t,v),h===N||(h=x(s)),l()):s.slice()},f.range=function(t){return arguments.length?(u=y.call(t),l()):u.slice()},f.rangeRound=function(t){return u=y.call(t),c=p.interpolateRound,l()},f.clamp=function(t){return arguments.length?(h=t?x(s):N,f):h!==N},f.interpolate=function(t){return arguments.length?(c=t,l()):c},f.unknown=function(t){return arguments.length?(n=t,f):n},function(t,n){return e=t,r=n,l()}}function A(t,n){return o()(t,n)}function a(t,n,e,r){var i,o=k.tickStep(t,n,e);switch((r=s.formatSpecifier(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=s.precisionPrefix(o,a))||(r.precision=i),s.formatPrefix(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=s.precisionRound(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=s.precisionFixed(o))||(r.precision=i-2*("%"===r.type))}return s.format(r)}function l(s){var u=s.domain;return s.ticks=function(t){var n=u();return k.ticks(n[0],n[n.length-1],null==t?10:t)},s.tickFormat=function(t,n){var e=u();return a(e[0],e[e.length-1],null==t?10:t,n)},s.nice=function(t){null==t&&(t=10);var n,e=u(),r=0,i=e.length-1,o=e[r],a=e[i];return a<o&&(n=o,o=a,a=n,n=r,r=i,i=n),0<(n=k.tickIncrement(o,a,t))?(o=Math.floor(o/n)*n,a=Math.ceil(a/n)*n,n=k.tickIncrement(o,a,t)):n<0&&(o=Math.ceil(o*n)/n,a=Math.floor(a*n)/n,n=k.tickIncrement(o,a,t)),0<n?(e[r]=Math.floor(o/n)*n,e[i]=Math.ceil(a/n)*n,u(e)):n<0&&(e[r]=Math.ceil(o*n)/n,e[i]=Math.floor(a*n)/n,u(e)),s},s}function C(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function M(t){return Math.log(t)}function j(t){return Math.exp(t)}function P(t){return-Math.log(-t)}function E(t){return-Math.exp(-t)}function O(t){return isFinite(t)?+("1e"+t):t<0?0:t}function D(n){return function(t){return-n(-t)}}function f(t){var f,p,i=t(M,j),d=i.domain,y=10;function n(){var n,e;return f=(e=y)===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e}),p=10===(n=y)?O:n===Math.E?Math.exp:function(t){return Math.pow(n,t)},d()[0]<0?(f=D(f),p=D(p),t(P,E)):t(M,j),i}return i.base=function(t){return arguments.length?(y=+t,n()):y},i.domain=function(t){return arguments.length?(d(t),n()):d()},i.ticks=function(t){var n,e=d(),r=e[0],i=e[e.length-1];(n=i<r)&&(u=r,r=i,i=u);var o,a,s,u=f(r),c=f(i),h=null==t?10:+t,l=[];if(!(y%1)&&c-u<h){if(u=Math.round(u)-1,c=Math.round(c)+1,0<r){for(;u<c;++u)for(a=1,o=p(u);a<y;++a)if(!((s=o*a)<r)){if(i<s)break;l.push(s)}}else for(;u<c;++u)for(a=y-1,o=p(u);1<=a;--a)if(!((s=o*a)<r)){if(i<s)break;l.push(s)}}else l=k.ticks(u,c,Math.min(c-u,h)).map(p);return n?l.reverse():l},i.tickFormat=function(t,e){if(null==e&&(e=10===y?".0e":","),"function"!=typeof e&&(e=s.format(e)),t===1/0)return e;null==t&&(t=10);var r=Math.max(1,y*t/i.ticks().length);return function(t){var n=t/p(Math.round(f(t)));return n*y<y-.5&&(n*=y),n<=r?e(t):""}},i.nice=function(){return d(C(d(),{floor:function(t){return p(Math.floor(f(t)))},ceil:function(t){return p(Math.ceil(f(t)))}}))},i}function q(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function R(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function U(n){var e=1,t=n(q(e),R(e));return t.constant=function(t){return arguments.length?n(q(e=+t),R(e)):e},l(t)}function F(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function L(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Y(t){return t<0?-t*t:t*t}function z(n){var t=n(N,N),e=1;return t.exponent=function(t){return arguments.length?1===(e=+t)?n(N,N):.5===e?n(L,Y):n(F(e),F(1/e)):e},l(t)}function H(){var t=z(o());return t.copy=function(){return S(t,H()).exponent(t.exponent())},d.apply(t,arguments),t}var I=1e3,B=60*I,X=60*B,V=24*X,W=7*V,Z=30*V,$=365*V;function Q(t){return new Date(t)}function J(t){return t instanceof Date?+t:+new Date(+t)}function G(a,n,e,r,i,o,s,u,c){var h=A(N,N),l=h.invert,f=h.domain,p=c(".%L"),d=c(":%S"),y=c("%I:%M"),_=c("%I %p"),g=c("%a %d"),v=c("%b %d"),m=c("%B"),x=c("%Y"),b=[[s,1,I],[s,5,5*I],[s,15,15*I],[s,30,30*I],[o,1,B],[o,5,5*B],[o,15,15*B],[o,30,30*B],[i,1,X],[i,3,3*X],[i,6,6*X],[i,12,12*X],[r,1,V],[r,2,2*V],[e,1,W],[n,1,Z],[n,3,3*Z],[a,1,$]];function w(t){return(s(t)<t?p:o(t)<t?d:i(t)<t?y:r(t)<t?_:n(t)<t?e(t)<t?g:v:a(t)<t?m:x)(t)}function M(t,n,e,r){var i,o;return null==t&&(t=10),"number"==typeof t&&(i=Math.abs(e-n)/t,t=(o=k.bisector(function(t){return t[2]}).right(b,i))===b.length?(r=k.tickStep(n/$,e/$,t),a):o?(r=(o=b[i/b[o-1][2]<b[o][2]/i?o-1:o])[1],o[0]):(r=Math.max(k.tickStep(n,e,t),1),u)),null==r?t:t.every(r)}return h.invert=function(t){return new Date(l(t))},h.domain=function(t){return arguments.length?f(T.call(t,J)):f().map(Q)},h.ticks=function(t,n){var e,r=f(),i=r[0],o=r[r.length-1],a=o<i;return a&&(e=i,i=o,o=e),e=(e=M(t,i,o,n))?e.range(i,o+1):[],a?e.reverse():e},h.tickFormat=function(t,n){return null==n?w:c(n)},h.nice=function(t,n){var e=f();return(t=M(t,e[0],e[e.length-1],n))?f(C(e,t)):h},h.copy=function(){return S(h,G(a,n,e,r,i,o,s,u,c))},h}function K(){var n,e,r,i,o,a=0,s=1,u=N,c=!1;function h(t){return isNaN(t=+t)?o:u(0===r?.5:(t=(i(t)-n)*r,c?Math.max(0,Math.min(1,t)):t))}return h.domain=function(t){return arguments.length?(n=i(a=+t[0]),e=i(s=+t[1]),r=n===e?0:1/(e-n),h):[a,s]},h.clamp=function(t){return arguments.length?(c=!!t,h):c},h.interpolator=function(t){return arguments.length?(u=t,h):u},h.unknown=function(t){return arguments.length?(o=t,h):o},function(t){return n=(i=t)(a),e=t(s),r=n===e?0:1/(e-n),h}}function tt(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function nt(){var t=z(K());return t.copy=function(){return tt(t,nt()).exponent(t.exponent())},r.apply(t,arguments)}function et(){var n,e,r,i,o,a,s,u=0,c=.5,h=1,l=N,f=!1;function p(t){return isNaN(t=+t)?s:(t=.5+((t=+a(t))-e)*(t<e?i:o),l(f?Math.max(0,Math.min(1,t)):t))}return p.domain=function(t){return arguments.length?(n=a(u=+t[0]),e=a(c=+t[1]),r=a(h=+t[2]),i=n===e?0:.5/(e-n),o=e===r?0:.5/(r-e),p):[u,c,h]},p.clamp=function(t){return arguments.length?(f=!!t,p):f},p.interpolator=function(t){return arguments.length?(l=t,p):l},p.unknown=function(t){return arguments.length?(s=t,p):s},function(t){return n=(a=t)(u),e=t(c),r=t(h),i=n===e?0:.5/(e-n),o=e===r?0:.5/(r-e),p}}function rt(){var t=z(et());return t.copy=function(){return tt(t,rt()).exponent(t.exponent())},r.apply(t,arguments)}t.scaleBand=g,t.scalePoint=function(){return function t(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return t(e())},n}(g.apply(null,arguments).paddingInner(1))},t.scaleIdentity=function t(n){var e;function r(t){return isNaN(t=+t)?e:t}return(r.invert=r).domain=r.range=function(t){return arguments.length?(n=T.call(t,v),r):n.slice()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t(n).unknown(e)},n=arguments.length?T.call(n,v):[0,1],l(r)},t.scaleLinear=function t(){var n=A(N,N);return n.copy=function(){return S(n,t())},d.apply(n,arguments),l(n)},t.scaleLog=function t(){var n=f(o()).domain([1,10]);return n.copy=function(){return S(n,t()).base(n.base())},d.apply(n,arguments),n},t.scaleSymlog=function t(){var n=U(o());return n.copy=function(){return S(n,t()).constant(n.constant())},d.apply(n,arguments)},t.scaleOrdinal=_,t.scaleImplicit=c,t.scalePow=H,t.scaleSqrt=function(){return H.apply(null,arguments).exponent(.5)},t.scaleQuantile=function t(){var n,i=[],e=[],r=[];function o(){var t=0,n=Math.max(1,e.length);for(r=new Array(n-1);++t<n;)r[t-1]=k.quantile(i,t/n);return a}function a(t){return isNaN(t=+t)?n:e[k.bisect(r,t)]}return a.invertExtent=function(t){var n=e.indexOf(t);return n<0?[NaN,NaN]:[0<n?r[n-1]:i[0],n<r.length?r[n]:i[i.length-1]]},a.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var n,e=0,r=t.length;e<r;++e)null==(n=t[e])||isNaN(n=+n)||i.push(n);return i.sort(k.ascending),o()},a.range=function(t){return arguments.length?(e=y.call(t),o()):e.slice()},a.unknown=function(t){return arguments.length?(n=t,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return t().domain(i).range(e).unknown(n)},d.apply(a,arguments)},t.scaleQuantize=function t(){var n,e=0,r=1,i=1,o=[.5],a=[0,1];function s(t){return t<=t?a[k.bisect(o,t,0,i)]:n}function u(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*e)/(i+1);return s}return s.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],u()):[e,r]},s.range=function(t){return arguments.length?(i=(a=y.call(t)).length-1,u()):a.slice()},s.invertExtent=function(t){var n=a.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,o[0]]:i<=n?[o[i-1],r]:[o[n-1],o[n]]},s.unknown=function(t){return arguments.length&&(n=t),s},s.thresholds=function(){return o.slice()},s.copy=function(){return t().domain([e,r]).range(a).unknown(n)},d.apply(l(s),arguments)},t.scaleThreshold=function t(){var n,e=[.5],r=[0,1],i=1;function o(t){return t<=t?r[k.bisect(e,t,0,i)]:n}return o.domain=function(t){return arguments.length?(e=y.call(t),i=Math.min(e.length,r.length-1),o):e.slice()},o.range=function(t){return arguments.length?(r=y.call(t),i=Math.min(e.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var n=r.indexOf(t);return[e[n-1],e[n]]},o.unknown=function(t){return arguments.length?(n=t,o):n},o.copy=function(){return t().domain(e).range(r).unknown(n)},d.apply(o,arguments)},t.scaleTime=function(){return d.apply(G(n.timeYear,n.timeMonth,n.timeWeek,n.timeDay,n.timeHour,n.timeMinute,n.timeSecond,n.timeMillisecond,e.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return d.apply(G(n.utcYear,n.utcMonth,n.utcWeek,n.utcDay,n.utcHour,n.utcMinute,n.utcSecond,n.utcMillisecond,e.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scaleSequential=function t(){var n=l(K()(N));return n.copy=function(){return tt(n,t())},r.apply(n,arguments)},t.scaleSequentialLog=function t(){var n=f(K()).domain([1,10]);return n.copy=function(){return tt(n,t()).base(n.base())},r.apply(n,arguments)},t.scaleSequentialPow=nt,t.scaleSequentialSqrt=function(){return nt.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var n=U(K());return n.copy=function(){return tt(n,t()).constant(n.constant())},r.apply(n,arguments)},t.scaleSequentialQuantile=function t(){var i=[],n=N;function o(t){if(!isNaN(t=+t))return n((k.bisect(i,t)-1)/(i.length-1))}return o.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var n,e=0,r=t.length;e<r;++e)null==(n=t[e])||isNaN(n=+n)||i.push(n);return i.sort(k.ascending),o},o.interpolator=function(t){return arguments.length?(n=t,o):n},o.copy=function(){return t(n).domain(i)},r.apply(o,arguments)},t.scaleDiverging=function t(){var n=l(et()(N));return n.copy=function(){return tt(n,t())},r.apply(n,arguments)},t.scaleDivergingLog=function t(){var n=f(et()).domain([.1,1,10]);return n.copy=function(){return tt(n,t()).base(n.base())},r.apply(n,arguments)},t.scaleDivergingPow=rt,t.scaleDivergingSqrt=function(){return rt.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var n=U(et());return n.copy=function(){return tt(n,t()).constant(n.constant())},r.apply(n,arguments)},t.tickFormat=a,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e,t("d3-collection"),t("d3-array"),t("d3-interpolate"),t("d3-format"),t("d3-time"),t("d3-time-format")):"function"==typeof define&&define.amd?define(["exports","d3-collection","d3-array","d3-interpolate","d3-format","d3-time","d3-time-format"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-array":1,"d3-collection":3,"d3-format":7,"d3-interpolate":8,"d3-time":15,"d3-time-format":14}],11:[function(t,n,e){var r,i;r=this,i=function(o){"use strict";var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(t){var n=t+="",e=n.indexOf(":");return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),i.hasOwnProperty(n)?{space:i[n],local:t}:t}function s(t){var n=a(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}})(n)}function n(){}function l(t){return null==t?n:function(){return this.querySelector(t)}}function e(){return[]}function h(t){return null==t?e:function(){return this.querySelectorAll(t)}}function f(t){return function(){return this.matches(t)}}function t(t){return new Array(t.length)}function d(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}d.prototype={constructor:d,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var y="$";function w(t,n,e,r,i,o){for(var a,s=0,u=n.length,c=o.length;s<c;++s)(a=n[s])?(a.__data__=o[s],r[s]=a):e[s]=new d(t,o[s]);for(;s<u;++s)(a=n[s])&&(i[s]=a)}function M(t,n,e,r,i,o,a){for(var s,u,c={},h=n.length,l=o.length,f=new Array(h),p=0;p<h;++p)(s=n[p])&&(f[p]=u=y+a.call(s,s.__data__,p,n),u in c?i[p]=s:c[u]=s);for(p=0;p<l;++p)(s=c[u=y+a.call(t,o[p],p,o)])?((r[p]=s).__data__=o[p],c[u]=null):e[p]=new d(t,o[p]);for(p=0;p<h;++p)(s=n[p])&&c[f[p]]===s&&(i[p]=s)}function p(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function u(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function c(t,n){return t.style.getPropertyValue(n)||u(t).getComputedStyle(t,null).getPropertyValue(n)}function _(t){return t.trim().split(/^|\s+/)}function g(t){return t.classList||new v(t)}function v(t){this._node=t,this._names=_(t.getAttribute("class")||"")}function m(t,n){for(var e=g(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function x(t,n){for(var e=g(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function b(){this.textContent=""}function k(){this.innerHTML=""}function T(){this.nextSibling&&this.parentNode.appendChild(this)}function N(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function S(){return null}function A(){var t=this.parentNode;t&&t.removeChild(this)}function C(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function j(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}v.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);0<=n&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var P={};function E(e,t,n){return e=O(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function O(e,r,i){return function(t){var n=o.event;o.event=t;try{e.call(this,this.__data__,r,i)}finally{o.event=n}}}function D(o){return function(){var t=this.__on;if(t){for(var n,e=0,r=-1,i=t.length;e<i;++e)n=t[e],o.type&&n.type!==o.type||n.name!==o.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function q(u,c,h){var l=P.hasOwnProperty(u.type)?E:O;return function(t,n,e){var r,i=this.__on,o=l(c,n,e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===u.type&&r.name===u.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=h),void(r.value=c);this.addEventListener(u.type,o,h),r={type:u.type,name:u.name,value:c,listener:o,capture:h},i?i.push(r):this.__on=[r]}}function R(t,n,e){var r=u(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}o.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(P={mouseenter:"mouseover",mouseleave:"mouseout"}));var U=[null];function F(t,n){this._groups=t,this._parents=n}function L(){return new F([[document.documentElement]],U)}function Y(t){return"string"==typeof t?new F([[document.querySelector(t)]],[document.documentElement]):new F([[t]],U)}F.prototype=L.prototype={constructor:F,select:function(t){"function"!=typeof t&&(t=l(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,s=n[i],u=s.length,c=r[i]=new Array(u),h=0;h<u;++h)(o=s[h])&&(a=t.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new F(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=h(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,s=n[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new F(r,i)},filter:function(t){"function"!=typeof t&&(t=f(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new F(r,this._parents)},data:function(t,n){if(!t)return d=new Array(this.size()),h=-1,this.each(function(t){d[++h]=t}),d;var e,r=n?M:w,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),h=0;h<a;++h){var l=i[h],f=o[h],p=f.length,d=t.call(l,l&&l.__data__,h,i),y=d.length,_=u[h]=new Array(y),g=s[h]=new Array(y);r(l,f,_,g,c[h]=new Array(p),d,n);for(var v,m,x=0,b=0;x<y;++x)if(v=_[x]){for(b<=x&&(b=x+1);!(m=g[b])&&++b<y;);v._next=m||null}}return(s=new F(s,i))._enter=u,s._exit=c,s},enter:function(){return new F(this._enter||this._groups.map(t),this._parents)},exit:function(){return new F(this._exit||this._groups.map(t),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit(),r="function"==typeof t?t(r):r.append(t+"");return null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=n[s],h=e[s],l=c.length,f=a[s]=new Array(l),p=0;p<l;++p)(u=c[p]||h[p])&&(f[p]=u);for(;s<r;++s)a[s]=n[s];return new F(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e=e||p;for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),h=0;h<u;++h)(a=s[h])&&(c[h]=a);c.sort(t)}return new F(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=a(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}:function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return 1<arguments.length?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(n,e,r){return function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):c(this.node(),t)},property:function(t,n){return 1<arguments.length?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=_(t+"");if(arguments.length<2){for(var r=g(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?m:x)(this,t)}}:n?function(t){return function(){m(this,t)}}:function(t){return function(){x(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?b:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?k:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(T)},lower:function(){return this.each(N)},append:function(t){var n="function"==typeof t?t:s(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:s(t),r=null==n?S:"function"==typeof n?n:l(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(A)},clone:function(t){return this.select(t?j:C)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return 0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}),a=o.length;if(!(arguments.length<2)){for(s=n?q:D,null==e&&(e=!1),r=0;r<a;++r)this.each(s(o[r],n,e));return this}var s=this.node().__on;if(s)for(var u,c=0,h=s.length;c<h;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return R(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return R(this,t,n)}})(t,n))}};var z=0;function H(){return new I}function I(){this._="@"+(++z).toString(36)}function B(){for(var t,n=o.event;t=n.sourceEvent;)n=t;return n}function X(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}I.prototype=H.prototype={constructor:I,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},o.clientPoint=X,o.create=function(t){return Y(s(t).call(document.documentElement))},o.creator=s,o.customEvent=function(t,n,e,r){var i=o.event;t.sourceEvent=o.event,o.event=t;try{return n.apply(e,r)}finally{o.event=i}},o.local=H,o.matcher=f,o.mouse=function(t){var n=B();return n.changedTouches&&(n=n.changedTouches[0]),X(t,n)},o.namespace=a,o.namespaces=i,o.select=Y,o.selectAll=function(t){return"string"==typeof t?new F([document.querySelectorAll(t)],[document.documentElement]):new F([null==t?[]:t],U)},o.selection=L,o.selector=l,o.selectorAll=h,o.style=c,o.touch=function(t,n,e){arguments.length<3&&(e=n,n=B().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return X(t,r);return null},o.touches=function(t,n){null==n&&(n=B().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=X(t,n[e]);return i},o.window=u,Object.defineProperty(o,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],12:[function(t,n,e){var r,i;r=this,i=function(t,W){"use strict";function x(t){return function(){return t}}var Z=Math.abs,$=Math.atan2,Q=Math.cos,E=Math.max,J=Math.min,G=Math.sin,K=Math.sqrt,tt=1e-12,nt=Math.PI,et=nt/2,rt=2*nt;function it(t){return 1<=t?et:t<=-1?-et:Math.asin(t)}function e(t){return t.innerRadius}function r(t){return t.outerRadius}function i(t){return t.startAngle}function o(t){return t.endAngle}function a(t){return t&&t.padAngle}function ot(t,n,e,r,i,o,a){var s=t-e,u=n-r,c=(a?o:-o)/K(s*s+u*u),h=c*u,l=-c*s,f=t+h,p=n+l,d=e+h,y=r+l,_=(f+d)/2,g=(p+y)/2,v=d-f,m=y-p,x=v*v+m*m,b=i-o,w=f*y-d*p,M=(m<0?-1:1)*K(E(0,b*b*x-w*w)),k=(w*m-v*M)/x,T=(-w*v-m*M)/x,N=(w*m+v*M)/x,S=(-w*v+m*M)/x,A=k-_,C=T-g,j=N-_,P=S-g;return j*j+P*P<A*A+C*C&&(k=N,T=S),{cx:k,cy:T,x01:-h,y01:-l,x11:k*(i/b-1),y11:T*(i/b-1)}}function n(t){this._context=t}function v(t){return new n(t)}function m(t){return t[0]}function b(t){return t[1]}function s(){var a=m,s=b,u=x(!0),c=null,h=v,l=null;function n(t){var n,e,r,i=t.length,o=!1;for(null==c&&(l=h(r=W.path())),n=0;n<=i;++n)!(n<i&&u(e=t[n],n,t))===o&&((o=!o)?l.lineStart():l.lineEnd()),o&&l.point(+a(e,n,t),+s(e,n,t));if(r)return l=null,r+""||null}return n.x=function(t){return arguments.length?(a="function"==typeof t?t:x(+t),n):a},n.y=function(t){return arguments.length?(s="function"==typeof t?t:x(+t),n):s},n.defined=function(t){return arguments.length?(u="function"==typeof t?t:x(!!t),n):u},n.curve=function(t){return arguments.length?(h=t,null!=c&&(l=h(c)),n):h},n.context=function(t){return arguments.length?(null==t?c=l=null:l=h(c=t),n):c},n}function u(){var h=m,l=null,f=x(0),p=b,d=x(!0),y=null,_=v,g=null;function n(t){var n,e,r,i,o,a=t.length,s=!1,u=new Array(a),c=new Array(a);for(null==y&&(g=_(o=W.path())),n=0;n<=a;++n){if(!(n<a&&d(i=t[n],n,t))===s)if(s=!s)e=n,g.areaStart(),g.lineStart();else{for(g.lineEnd(),g.lineStart(),r=n-1;e<=r;--r)g.point(u[r],c[r]);g.lineEnd(),g.areaEnd()}s&&(u[n]=+h(i,n,t),c[n]=+f(i,n,t),g.point(l?+l(i,n,t):u[n],p?+p(i,n,t):c[n]))}if(o)return g=null,o+""||null}function t(){return s().defined(d).curve(_).context(y)}return n.x=function(t){return arguments.length?(h="function"==typeof t?t:x(+t),l=null,n):h},n.x0=function(t){return arguments.length?(h="function"==typeof t?t:x(+t),n):h},n.x1=function(t){return arguments.length?(l=null==t?null:"function"==typeof t?t:x(+t),n):l},n.y=function(t){return arguments.length?(f="function"==typeof t?t:x(+t),p=null,n):f},n.y0=function(t){return arguments.length?(f="function"==typeof t?t:x(+t),n):f},n.y1=function(t){return arguments.length?(p=null==t?null:"function"==typeof t?t:x(+t),n):p},n.lineX0=n.lineY0=function(){return t().x(h).y(f)},n.lineY1=function(){return t().x(h).y(p)},n.lineX1=function(){return t().x(l).y(f)},n.defined=function(t){return arguments.length?(d="function"==typeof t?t:x(!!t),n):d},n.curve=function(t){return arguments.length?(_=t,null!=y&&(g=_(y)),n):_},n.context=function(t){return arguments.length?(null==t?y=g=null:g=_(y=t),n):y},n}function c(t,n){return n<t?-1:t<n?1:t<=n?0:NaN}function h(t){return t}n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var l=p(v);function f(t){this._curve=t}function p(n){function t(t){return new f(n(t))}return t._curve=n,t}function d(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(p(t)):n()._curve},t}function y(){return d(s().curve(l))}function _(){var t=u().curve(l),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return d(e())},delete t.lineX0,t.lineEndAngle=function(){return d(r())},delete t.lineX1,t.lineInnerRadius=function(){return d(i())},delete t.lineY0,t.lineOuterRadius=function(){return d(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(p(t)):n()._curve},t}function g(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}f.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var w=Array.prototype.slice;function M(t){return t.source}function k(t){return t.target}function T(i){var o=M,a=k,s=m,u=b,c=null;function n(){var t,n=w.call(arguments),e=o.apply(this,n),r=a.apply(this,n);if(c=c||(t=W.path()),i(c,+s.apply(this,(n[0]=e,n)),+u.apply(this,n),+s.apply(this,(n[0]=r,n)),+u.apply(this,n)),t)return c=null,t+""||null}return n.source=function(t){return arguments.length?(o=t,n):o},n.target=function(t){return arguments.length?(a=t,n):a},n.x=function(t){return arguments.length?(s="function"==typeof t?t:x(+t),n):s},n.y=function(t){return arguments.length?(u="function"==typeof t?t:x(+t),n):u},n.context=function(t){return arguments.length?(c=null==t?null:t,n):c},n}function N(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function S(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n,e=(e+i)/2,r,e,r,i)}function A(t,n,e,r,i){var o=g(n,e),a=g(n,e=(e+i)/2),s=g(r,e),u=g(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}var C={draw:function(t,n){var e=Math.sqrt(n/nt);t.moveTo(e,0),t.arc(0,0,e,0,rt)}},j={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},P=Math.sqrt(1/3),O=2*P,D={draw:function(t,n){var e=Math.sqrt(n/O),r=e*P;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},q=Math.sin(nt/10)/Math.sin(7*nt/10),R=Math.sin(rt/10)*q,U=-Math.cos(rt/10)*q,F={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),r=R*e,i=U*e;t.moveTo(0,-e),t.lineTo(r,i);for(var o=1;o<5;++o){var a=rt*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*e,-s*e),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},L={draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},Y=Math.sqrt(3),z={draw:function(t,n){var e=-Math.sqrt(n/(3*Y));t.moveTo(0,2*e),t.lineTo(-Y*e,-e),t.lineTo(Y*e,-e),t.closePath()}},H=-.5,I=Math.sqrt(3)/2,B=1/Math.sqrt(12),X=3*(B/2+1),V={draw:function(t,n){var e=Math.sqrt(n/X),r=e/2,i=e*B,o=r,a=e*B+e,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(H*r-I*i,I*r+H*i),t.lineTo(H*o-I*a,I*o+H*a),t.lineTo(H*s-I*u,I*s+H*u),t.lineTo(H*r+I*i,H*i-I*r),t.lineTo(H*o+I*a,H*a-I*o),t.lineTo(H*s+I*u,H*u-I*s),t.closePath()}},at=[C,j,D,L,F,z,V];function st(){}function ut(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function ct(t){this._context=t}function ht(t){this._context=t}function lt(t){this._context=t}function ft(t,n){this._basis=new ct(t),this._beta=n}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ut(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ut(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},ht.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:ut(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:ut(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},ft.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(0<e)for(var r,i=t[0],o=n[0],a=t[e]-i,s=n[e]-o,u=-1;++u<=e;)r=u/e,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*n[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var pt=function n(e){function t(t){return 1===e?new ct(t):new ft(t,e)}return t.beta=function(t){return n(+t)},t}(.85);function dt(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function yt(t,n){this._context=t,this._k=(1-n)/6}yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:dt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:dt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var _t=function n(e){function t(t){return new yt(t,e)}return t.tension=function(t){return n(+t)},t}(0);function gt(t,n){this._context=t,this._k=(1-n)/6}gt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:dt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var vt=function n(e){function t(t){return new gt(t,e)}return t.tension=function(t){return n(+t)},t}(0);function mt(t,n){this._context=t,this._k=(1-n)/6}mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var xt=function n(e){function t(t){return new mt(t,e)}return t.tension=function(t){return n(+t)},t}(0);function bt(t,n,e){var r,i,o,a,s=t._x1,u=t._y1,c=t._x2,h=t._y2;t._l01_a>tt&&(r=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a),s=(s*r-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,u=(u*r-t._y0*t._l12_2a+t._y2*t._l01_2a)/i),t._l23_a>tt&&(o=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,a=3*t._l23_a*(t._l23_a+t._l12_a),c=(c*o+t._x1*t._l23_2a-n*t._l12_2a)/a,h=(h*o+t._y1*t._l23_2a-e*t._l12_2a)/a),t._context.bezierCurveTo(s,u,c,h,t._x2,t._y2)}function wt(t,n){this._context=t,this._alpha=n}wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e,r;switch(t=+t,n=+n,this._point&&(e=this._x2-t,r=this._y2-n,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:bt(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Mt=function n(e){function t(t){return e?new wt(t,e):new yt(t,0)}return t.alpha=function(t){return n(+t)},t}(.5);function kt(t,n){this._context=t,this._alpha=n}kt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){var e,r;switch(t=+t,n=+n,this._point&&(e=this._x2-t,r=this._y2-n,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))),this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:bt(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Tt=function n(e){function t(t){return e?new kt(t,e):new gt(t,0)}return t.alpha=function(t){return n(+t)},t}(.5);function Nt(t,n){this._context=t,this._alpha=n}Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e,r;switch(t=+t,n=+n,this._point&&(e=this._x2-t,r=this._y2-n,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bt(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var St=function n(e){function t(t){return e?new Nt(t,e):new mt(t,0)}return t.alpha=function(t){return n(+t)},t}(.5);function At(t){this._context=t}function Ct(t){return t<0?-1:1}function jt(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Ct(o)+Ct(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Pt(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Et(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*n,o-s,a-s*e,o,a)}function Ot(t){this._context=t}function Dt(t){this._context=new qt(t)}function qt(t){this._context=t}function Rt(t){this._context=t}function Ut(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(o[i[0]=0]=2,a[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(i[r-1]=a[r-1]/o[r-1],n=r-2;0<=n;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function Ft(t,n){this._context=t,this._t=n}function Lt(t,n){if(1<(i=t.length))for(var e,r,i,o=1,a=t[n[0]],s=a.length;o<i;++o)for(r=a,a=t[n[o]],e=0;e<s;++e)a[e][1]+=a[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}function Yt(t){for(var n=t.length,e=new Array(n);0<=--n;)e[n]=n;return e}function zt(t,n){return t[n]}function Ht(t){var e=t.map(It);return Yt(t).sort(function(t,n){return e[t]-e[n]})}function It(t){for(var n,e=-1,r=0,i=t.length,o=-1/0;++e<i;)(n=+t[e][1])>o&&(o=n,r=e);return r}function Bt(t){var e=t.map(Xt);return Yt(t).sort(function(t,n){return e[t]-e[n]})}function Xt(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}At.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},Ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Et(this,this._t0,Pt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Et(this,Pt(this,e=jt(this,t,n)),e);break;default:Et(this,this._t0,e=jt(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(Dt.prototype=Object.create(Ot.prototype)).point=function(t,n){Ot.prototype.point.call(this,n,t)},qt.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},Rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=Ut(t),i=Ut(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],n[a]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:var e;this._t<=0?(this._context.lineTo(this._x,n),this._context.lineTo(t,n)):(e=this._x*(1-this._t)+t*this._t,this._context.lineTo(e,this._y),this._context.lineTo(e,n))}this._x=t,this._y=n}},t.arc=function(){var L=e,Y=r,z=x(0),H=null,I=i,B=o,X=a,V=null;function n(){var t,n,e,r,i,o,a,s,u,c,h,l,f,p,d,y,_,g,v,m,x,b,w,M,k,T,N,S,A,C,j,P,E,O=+L.apply(this,arguments),D=+Y.apply(this,arguments),q=I.apply(this,arguments)-et,R=B.apply(this,arguments)-et,U=Z(R-q),F=q<R;if(V=V||(t=W.path()),D<O&&(n=D,D=O,O=n),tt<D?rt-tt<U?(V.moveTo(D*Q(q),D*G(q)),V.arc(0,0,D,q,R,!F),tt<O&&(V.moveTo(O*Q(R),O*G(R)),V.arc(0,0,O,R,q,F))):(i=e=q,o=r=R,s=a=U,u=X.apply(this,arguments)/2,c=tt<u&&(H?+H.apply(this,arguments):K(O*O+D*D)),P=j=h=J(Z(D-O)/2,+z.apply(this,arguments)),tt<c&&(p=it(c/O*G(u)),d=it(c/D*G(u)),(a-=2*p)>tt?(i+=p*=F?1:-1,o-=p):(a=0,i=o=(q+R)/2),(s-=2*d)>tt?(e+=d*=F?1:-1,r-=d):(s=0,e=r=(q+R)/2)),y=D*Q(e),_=D*G(e),g=O*Q(o),v=O*G(o),tt<h&&(m=D*Q(r),x=D*G(r),b=O*Q(i),w=O*G(i),U<nt&&(M=function(t,n,e,r,i,o,a,s){var u=e-t,c=r-n,h=a-i,l=s-o,f=l*u-h*c;if(!(f*f<tt))return[t+(f=(h*(n-o)-l*(t-i))/f)*u,n+f*c]}(y,_,b,w,m,x,g,v))&&(k=y-M[0],T=_-M[1],N=m-M[0],S=x-M[1],A=1/G((1<(E=(k*N+T*S)/(K(k*k+T*T)*K(N*N+S*S)))?0:E<-1?nt:Math.acos(E))/2),C=K(M[0]*M[0]+M[1]*M[1]),j=J(h,(O-C)/(A-1)),P=J(h,(D-C)/(1+A)))),tt<s?tt<P?(l=ot(b,w,y,_,D,P,F),f=ot(m,x,g,v,D,P,F),V.moveTo(l.cx+l.x01,l.cy+l.y01),P<h?V.arc(l.cx,l.cy,P,$(l.y01,l.x01),$(f.y01,f.x01),!F):(V.arc(l.cx,l.cy,P,$(l.y01,l.x01),$(l.y11,l.x11),!F),V.arc(0,0,D,$(l.cy+l.y11,l.cx+l.x11),$(f.cy+f.y11,f.cx+f.x11),!F),V.arc(f.cx,f.cy,P,$(f.y11,f.x11),$(f.y01,f.x01),!F))):(V.moveTo(y,_),V.arc(0,0,D,e,r,!F)):V.moveTo(y,_),tt<O&&tt<a?tt<j?(l=ot(g,v,m,x,O,-j,F),f=ot(y,_,b,w,O,-j,F),V.lineTo(l.cx+l.x01,l.cy+l.y01),j<h?V.arc(l.cx,l.cy,j,$(l.y01,l.x01),$(f.y01,f.x01),!F):(V.arc(l.cx,l.cy,j,$(l.y01,l.x01),$(l.y11,l.x11),!F),V.arc(0,0,O,$(l.cy+l.y11,l.cx+l.x11),$(f.cy+f.y11,f.cx+f.x11),F),V.arc(f.cx,f.cy,j,$(f.y11,f.x11),$(f.y01,f.x01),!F))):V.arc(0,0,O,o,i,F):V.lineTo(g,v)):V.moveTo(0,0),V.closePath(),t)return V=null,t+""||null}return n.centroid=function(){var t=(+L.apply(this,arguments)+ +Y.apply(this,arguments))/2,n=(+I.apply(this,arguments)+ +B.apply(this,arguments))/2-nt/2;return[Q(n)*t,G(n)*t]},n.innerRadius=function(t){return arguments.length?(L="function"==typeof t?t:x(+t),n):L},n.outerRadius=function(t){return arguments.length?(Y="function"==typeof t?t:x(+t),n):Y},n.cornerRadius=function(t){return arguments.length?(z="function"==typeof t?t:x(+t),n):z},n.padRadius=function(t){return arguments.length?(H=null==t?null:"function"==typeof t?t:x(+t),n):H},n.startAngle=function(t){return arguments.length?(I="function"==typeof t?t:x(+t),n):I},n.endAngle=function(t){return arguments.length?(B="function"==typeof t?t:x(+t),n):B},n.padAngle=function(t){return arguments.length?(X="function"==typeof t?t:x(+t),n):X},n.context=function(t){return arguments.length?(V=null==t?null:t,n):V},n},t.area=u,t.areaRadial=_,t.curveBasis=function(t){return new ct(t)},t.curveBasisClosed=function(t){return new ht(t)},t.curveBasisOpen=function(t){return new lt(t)},t.curveBundle=pt,t.curveCardinal=_t,t.curveCardinalClosed=vt,t.curveCardinalOpen=xt,t.curveCatmullRom=Mt,t.curveCatmullRomClosed=Tt,t.curveCatmullRomOpen=St,t.curveLinear=v,t.curveLinearClosed=function(t){return new At(t)},t.curveMonotoneX=function(t){return new Ot(t)},t.curveMonotoneY=function(t){return new Dt(t)},t.curveNatural=function(t){return new Rt(t)},t.curveStep=function(t){return new Ft(t,.5)},t.curveStepAfter=function(t){return new Ft(t,1)},t.curveStepBefore=function(t){return new Ft(t,0)},t.line=s,t.lineRadial=y,t.linkHorizontal=function(){return T(N)},t.linkRadial=function(){var t=T(A);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.linkVertical=function(){return T(S)},t.pie=function(){var d=h,y=c,_=null,g=x(0),v=x(rt),m=x(0);function n(e){for(var t,n,r,i,o=e.length,a=0,s=new Array(o),u=new Array(o),c=+g.apply(this,arguments),h=Math.min(rt,Math.max(-rt,v.apply(this,arguments)-c)),l=Math.min(Math.abs(h)/o,m.apply(this,arguments)),f=l*(h<0?-1:1),p=0;p<o;++p)0<(i=u[s[p]=p]=+d(e[p],p,e))&&(a+=i);for(null!=y?s.sort(function(t,n){return y(u[t],u[n])}):null!=_&&s.sort(function(t,n){return _(e[t],e[n])}),p=0,n=a?(h-o*f)/a:0;p<o;++p,c=r)t=s[p],r=c+(0<(i=u[t])?i*n:0)+f,u[t]={data:e[t],index:p,value:i,startAngle:c,endAngle:r,padAngle:l};return u}return n.value=function(t){return arguments.length?(d="function"==typeof t?t:x(+t),n):d},n.sortValues=function(t){return arguments.length?(y=t,_=null,n):y},n.sort=function(t){return arguments.length?(_=t,y=null,n):_},n.startAngle=function(t){return arguments.length?(g="function"==typeof t?t:x(+t),n):g},n.endAngle=function(t){return arguments.length?(v="function"==typeof t?t:x(+t),n):v},n.padAngle=function(t){return arguments.length?(m="function"==typeof t?t:x(+t),n):m},n},t.pointRadial=g,t.radialArea=_,t.radialLine=y,t.stack=function(){var l=x([]),f=Yt,p=Lt,d=zt;function n(t){for(var n,e=l.apply(this,arguments),r=t.length,i=e.length,o=new Array(i),a=0;a<i;++a){for(var s,u=e[a],c=o[a]=new Array(r),h=0;h<r;++h)c[h]=s=[0,+d(t[h],u,h,t)],s.data=t[h];c.key=u}for(a=0,n=f(o);a<i;++a)o[n[a]].index=a;return p(o,n),o}return n.keys=function(t){return arguments.length?(l="function"==typeof t?t:x(w.call(t)),n):l},n.value=function(t){return arguments.length?(d="function"==typeof t?t:x(+t),n):d},n.order=function(t){return arguments.length?(f=null==t?Yt:"function"==typeof t?t:x(w.call(t)),n):f},n.offset=function(t){return arguments.length?(p=null==t?Lt:t,n):p},n},t.stackOffsetDiverging=function(t,n){if(0<(s=t.length))for(var e,r,i,o,a,s,u=0,c=t[n[0]].length;u<c;++u)for(e=o=a=0;e<s;++e)0<(i=(r=t[n[e]][u])[1]-r[0])?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)},t.stackOffsetExpand=function(t,n){if(0<(r=t.length)){for(var e,r,i,o=0,a=t[0].length;o<a;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}Lt(t,n)}},t.stackOffsetNone=Lt,t.stackOffsetSilhouette=function(t,n){if(0<(e=t.length)){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<e;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}Lt(t,n)}},t.stackOffsetWiggle=function(t,n){if(0<(i=t.length)&&0<(r=(e=t[n[0]]).length)){for(var e,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var h=t[n[s]],l=h[a][1]||0,f=(l-(h[a-1][1]||0))/2,p=0;p<s;++p){var d=t[n[p]];f+=(d[a][1]||0)-(d[a-1][1]||0)}u+=l,c+=f*l}e[a-1][1]+=e[a-1][0]=o,u&&(o-=c/u)}e[a-1][1]+=e[a-1][0]=o,Lt(t,n)}},t.stackOrderAppearance=Ht,t.stackOrderAscending=Bt,t.stackOrderDescending=function(t){return Bt(t).reverse()},t.stackOrderInsideOut=function(t){for(var n,e=t.length,r=t.map(Xt),i=Ht(t),o=0,a=0,s=[],u=[],c=0;c<e;++c)n=i[c],o<a?(o+=r[n],s.push(n)):(a+=r[n],u.push(n));return u.reverse().concat(s)},t.stackOrderNone=Yt,t.stackOrderReverse=function(t){return Yt(t).reverse()},t.symbol=function(){var n=x(C),e=x(64),r=null;function i(){var t;if(r=r||(t=W.path()),n.apply(this,arguments).draw(r,+e.apply(this,arguments)),t)return r=null,t+""||null}return i.type=function(t){return arguments.length?(n="function"==typeof t?t:x(t),i):n},i.size=function(t){return arguments.length?(e="function"==typeof t?t:x(+t),i):e},i.context=function(t){return arguments.length?(r=null==t?null:t,i):r},i},t.symbolCircle=C,t.symbolCross=j,t.symbolDiamond=D,t.symbolSquare=L,t.symbolStar=F,t.symbolTriangle=z,t.symbolWye=V,t.symbols=at,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e,t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-path"],i):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-path":9}],13:[function(t,n,e){var r,i;r=this,i=function(t){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},n=function(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t};function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,n,e){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:a(i,n,e)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(e):void 0}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var g=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},s=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},_=(n(w,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&0!==this.type.subject.selectAll(":not(.handle)").nodes().length&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),0!==this.type.connector.selectAll(":not(.handle)").nodes().length&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(t){this._className=t,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(t){this._type=t,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(t){this._dx=t,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(t){this._dy=t,this.updateOffset()}},{key:"nx",set:function(t){this._dx=t-this._x,this.updateOffset()}},{key:"ny",set:function(t){this._dy=t-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(t){var n=t.x,e=t.y;this._dx=n,this._dy=e,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(t){var n=t.x,e=t.y;this._x=n,this._y=e,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var t={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&0<Object.keys(this.data).length&&(t.data=this.data),this.type&&(t.type=this.type),this._className&&(t.className=this._className),0<Object.keys(this.connector).length&&(t.connector=this.connector),0<Object.keys(this.subject).length&&(t.subject=this.subject),0<Object.keys(this.note).length&&(t.note=this.note),t}}]),w);function w(t){var n=t.x,e=void 0===n?0:n,r=t.y,i=void 0===r?0:r,o=t.nx,a=t.ny,s=t.dy,u=void 0===s?0:s,c=t.dx,h=void 0===c?0:c,l=t.color,f=void 0===l?"grey":l,p=t.data,d=t.type,y=t.subject,_=t.connector,g=t.note,v=t.disable,m=t.id,x=t.className;b(this,w),this._dx=void 0!==o?o-e:h,this._dy=void 0!==a?a-i:u,this._x=e,this._y=i,this._color=f,this.id=m,this._className=x||"",this._type=d||"",this.data=p,this.note=g||{},this.connector=_||{},this.subject=y||{},this.disable=v||[]}var v=(n(i,[{key:"clearTypes",value:function(n){this.annotations.forEach(function(t){t.type=void 0,t.subject=n&&n.subject||t.subject,t.connector=n&&n.connector||t.connector,t.note=n&&n.note||t.note})}},{key:"setPositionWithAccessors",value:function(){var n=this;this.annotations.forEach(function(t){t.type.setPositionWithAccessors(n.accessors)})}},{key:"editMode",value:function(n){this.annotations.forEach(function(t){t.type&&(t.type.editMode=n,t.type.updateEditMode())})}},{key:"updateDisable",value:function(t){this.annotations.forEach(function(n){n.disable=t,n.type&&t.forEach(function(t){n.type[t]&&(n.type[t].remove&&n.type[t].remove(),n.type[t]=void 0)})})}},{key:"updateTextWrap",value:function(n){this.annotations.forEach(function(t){t.type&&t.type.updateTextWrap&&t.type.updateTextWrap(n)})}},{key:"updateText",value:function(){this.annotations.forEach(function(t){t.type&&t.type.drawText&&t.type.drawText()})}},{key:"updateNotePadding",value:function(n){this.annotations.forEach(function(t){t.type&&(t.type.notePadding=n)})}},{key:"json",get:function(){var r=this;return this.annotations.map(function(n){var e=n.json;return r.accessorsInverse&&n.data&&(e.data={},Object.keys(r.accessorsInverse).forEach(function(t){e.data[t]=r.accessorsInverse[t]({x:n.x,y:n.y})})),e})}},{key:"noteNodes",get:function(){return this.annotations.map(function(t){return g({},t.type.getNoteBBoxOffset(),{positionX:t.x,positionY:t.y})})}}]),i);function i(t){var n=t.annotations,e=t.accessors,r=t.accessorsInverse;b(this,i),this.accessors=e,this.accessorsInverse=r,this.annotations=n}function u(t){var n=t+="",e=n.indexOf(":");return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),l.hasOwnProperty(n)?{space:l[n],local:t}:t}var h="http://www.w3.org/1999/xhtml",l={svg:"http://www.w3.org/2000/svg",xhtml:h,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function f(t){var n=u(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===h&&t.documentElement.namespaceURI===h?t.createElement(e):t.createElementNS(n,e)}})(n)}function e(){}function p(t){return null==t?e:function(){return this.querySelector(t)}}function d(){return[]}function y(t){return new Array(t.length)}function m(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}m.prototype={constructor:m,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function M(t,n,e,r,i,o){for(var a,s=0,u=n.length,c=o.length;s<c;++s)(a=n[s])?(a.__data__=o[s],r[s]=a):e[s]=new m(t,o[s]);for(;s<u;++s)(a=n[s])&&(i[s]=a)}function k(t,n,e,r,i,o,a){for(var s,u,c={},h=n.length,l=o.length,f=new Array(h),p=0;p<h;++p)(s=n[p])&&(f[p]=u="$"+a.call(s,s.__data__,p,n),u in c?i[p]=s:c[u]=s);for(p=0;p<l;++p)(s=c[u="$"+a.call(t,o[p],p,o)])?((r[p]=s).__data__=o[p],c[u]=null):e[p]=new m(t,o[p]);for(p=0;p<h;++p)(s=n[p])&&c[f[p]]===s&&(i[p]=s)}function x(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}var T=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function N(t){return t.trim().split(/^|\s+/)}function S(t){return t.classList||new A(t)}function A(t){this._node=t,this._names=N(t.getAttribute("class")||"")}function C(t,n){for(var e=S(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function j(t,n){for(var e=S(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}A.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);0<=n&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function P(){this.textContent=""}function E(){this.innerHTML=""}function O(){this.nextSibling&&this.parentNode.appendChild(this)}function D(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q(){return null}function R(){var t=this.parentNode;t&&t.removeChild(this)}function U(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function F(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var L={},Y=null;function z(e,t,n){return e=H(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function H(e,r,i){return function(t){var n=Y;Y=t;try{e.call(this,this.__data__,r,i)}finally{Y=n}}}function I(o){return function(){var t=this.__on;if(t){for(var n,e=0,r=-1,i=t.length;e<i;++e)n=t[e],o.type&&n.type!==o.type||n.name!==o.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function B(u,c,h){var l=L.hasOwnProperty(u.type)?z:H;return function(t,n,e){var r,i=this.__on,o=l(c,n,e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===u.type&&r.name===u.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=h),void(r.value=c);this.addEventListener(u.type,o,h),r={type:u.type,name:u.name,value:c,listener:o,capture:h},i?i.push(r):this.__on=[r]}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(L={mouseenter:"mouseover",mouseleave:"mouseout"}));function X(t,n,e,r){var i=Y;t.sourceEvent=Y,Y=t;try{return n.apply(e,r)}finally{Y=i}}function V(t,n,e){var r=T(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}var W=[null];function Z(t,n){this._groups=t,this._parents=n}Z.prototype={constructor:Z,select:function(t){"function"!=typeof t&&(t=p(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,s=n[i],u=s.length,c=r[i]=new Array(u),h=0;h<u;++h)(o=s[h])&&(a=t.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new Z(r,this._parents)},selectAll:function(t){var n;"function"!=typeof t&&(t=null==(n=t)?d:function(){return this.querySelectorAll(n)});for(var e=this._groups,r=e.length,i=[],o=[],a=0;a<r;++a)for(var s,u=e[a],c=u.length,h=0;h<c;++h)(s=u[h])&&(i.push(t.call(s,s.__data__,h,u)),o.push(s));return new Z(i,o)},filter:function(t){var n;"function"!=typeof t&&(n=t,t=function(){return this.matches(n)});for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var a,s=e[o],u=s.length,c=i[o]=[],h=0;h<u;++h)(a=s[h])&&t.call(a,a.__data__,h,s)&&c.push(a);return new Z(i,this._parents)},data:function(t,n){if(!t)return d=new Array(this.size()),h=-1,this.each(function(t){d[++h]=t}),d;var e,r=n?k:M,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),h=0;h<a;++h){var l=i[h],f=o[h],p=f.length,d=t.call(l,l&&l.__data__,h,i),y=d.length,_=u[h]=new Array(y),g=s[h]=new Array(y);r(l,f,_,g,c[h]=new Array(p),d,n);for(var v,m,x=0,b=0;x<y;++x)if(v=_[x]){for(b<=x&&(b=x+1);!(m=g[b])&&++b<y;);v._next=m||null}}return(s=new Z(s,i))._enter=u,s._exit=c,s},enter:function(){return new Z(this._enter||this._groups.map(y),this._parents)},exit:function(){return new Z(this._exit||this._groups.map(y),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit(),r="function"==typeof t?t(r):r.append(t+"");return null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=n[s],h=e[s],l=c.length,f=a[s]=new Array(l),p=0;p<l;++p)(u=c[p]||h[p])&&(f[p]=u);for(;s<r;++s)a[s]=n[s];return new Z(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e=e||x;for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),h=0;h<u;++h)(a=s[h])&&(c[h]=a);c.sort(t)}return new Z(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=u(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}:function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return 1<arguments.length?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(n,e,r){return function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):(r=this.node(),i=t,r.style.getPropertyValue(i)||T(r).getComputedStyle(r,null).getPropertyValue(i));var r,i},property:function(t,n){return 1<arguments.length?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=N(t+"");if(arguments.length<2){for(var r=S(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?C:j)(this,t)}}:n?function(t){return function(){C(this,t)}}:function(t){return function(){j(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?P:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?E:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(O)},lower:function(){return this.each(D)},append:function(t){var n="function"==typeof t?t:f(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:f(t),r=null==n?q:"function"==typeof n?n:p(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(R)},clone:function(t){return this.select(t?F:U)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return 0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}),a=o.length;if(!(arguments.length<2)){for(s=n?B:I,null==e&&(e=!1),r=0;r<a;++r)this.each(s(o[r],n,e));return this}var s=this.node().__on;if(s)for(var u,c=0,h=s.length;c<h;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return V(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return V(this,t,n)}})(t,n))}};function $(){for(var t,n=Y;t=n.sourceEvent;)n=t;return n}function Q(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function J(t){var n=$();return n.changedTouches&&(n=n.changedTouches[0]),Q(t,n)}function G(t,n,e){arguments.length<3&&(e=n,n=$().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return Q(t,r);return null}var K=function(t){return"string"==typeof t?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],W)},tt={value:function(){}};function nt(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new et(r)}function et(t){this._=t}function rt(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=tt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function it(){Y.stopImmediatePropagation()}et.prototype=nt.prototype={constructor:et,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<s;)if(e=(t=o[a]).type)i[e]=rt(i[e],t.name,n);else if(null==n)for(e in i)i[e]=rt(i[e],t.name,null);return this}for(;++a<s;)if((e=(t=o[a]).type)&&(e=function(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new et(t)},call:function(t,n){if(0<(e=arguments.length-2))for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var ot=function(){Y.preventDefault(),Y.stopImmediatePropagation()};function at(t){return function(){return t}}function st(t,n,e,r,i,o,a,s,u,c){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function ut(){return!Y.button}function ct(){return this.parentNode}function ht(t){return null==t?{x:Y.x,y:Y.y}:t}function lt(){return"ontouchstart"in this}st.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ft(){var i,o,a,s,u=ut,c=ct,n=ht,e=lt,d={},r=nt("start","drag","end"),y=0,h=0;function _(t){t.on("mousedown.drag",l).filter(e).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t,n,e,r;s||!u.apply(this,arguments)||(t=x("mouse",c.apply(this,arguments),J,this,arguments))&&(K(Y.view).on("mousemove.drag",f,!0).on("mouseup.drag",p,!0),n=Y.view,e=n.document.documentElement,r=K(n).on("dragstart.drag",ot,!0),"onselectstart"in e?r.on("selectstart.drag",ot,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none"),it(),a=!1,i=Y.clientX,o=Y.clientY,t("start"))}function f(){var t,n;ot(),a||(t=Y.clientX-i,n=Y.clientY-o,a=h<t*t+n*n),d.mouse("drag")}function p(){var t,n,e,r;K(Y.view).on("mousemove.drag mouseup.drag",null),t=Y.view,n=a,e=t.document.documentElement,r=K(t).on("dragstart.drag",null),n&&(r.on("click.drag",ot,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect),ot(),d.mouse("end")}function g(){if(u.apply(this,arguments))for(var t,n=Y.changedTouches,e=c.apply(this,arguments),r=n.length,i=0;i<r;++i)(t=x(n[i].identifier,e,G,this,arguments))&&(it(),t("start"))}function v(){for(var t,n=Y.changedTouches,e=n.length,r=0;r<e;++r)(t=d[n[r].identifier])&&(ot(),t("drag"))}function m(){var t,n,e=Y.changedTouches,r=e.length;for(s&&clearTimeout(s),s=setTimeout(function(){s=null},500),t=0;t<r;++t)(n=d[e[t].identifier])&&(it(),n("end"))}function x(i,o,a,s,u){var c,h,l,f=a(o,i),p=r.copy();if(X(new st(_,"beforestart",c,i,y,f[0],f[1],0,0,p),function(){return null!=(Y.subject=c=n.apply(s,u))&&(h=c.x-f[0]||0,l=c.y-f[1]||0,!0)}))return function t(n){var e,r=f;switch(n){case"start":d[i]=t,e=y++;break;case"end":delete d[i],--y;case"drag":f=a(o,i),e=y}X(new st(_,n,c,i,e,f[0]+h,f[1]+l,f[0]-r[0],f[1]-r[1],p),p.apply,p,[n,s,u])}}return _.filter=function(t){return arguments.length?(u="function"==typeof t?t:at(!!t),_):u},_.container=function(t){return arguments.length?(c="function"==typeof t?t:at(t),_):c},_.subject=function(t){return arguments.length?(n="function"==typeof t?t:at(t),_):n},_.touchable=function(t){return arguments.length?(e="function"==typeof t?t:at(!!t),_):e},_.on=function(){var t=r.on.apply(r,arguments);return t===r?_:t},_.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,_):Math.sqrt(h)},_}function pt(t,n){return"dynamic"!==t&&"left"!==t&&"right"!==t||(t=n<0?"top":"bottom"),t}function dt(t,n){return"dynamic"!==t&&"top"!==t&&"bottom"!==t||(t=n<0?"right":"left"),t}var yt=["topBottom","top","bottom"],_t=["leftRight","left","right"],gt=Math.PI,vt=2*gt,mt=1e-6,xt=vt-mt;function bt(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function wt(){return new bt}bt.prototype=wt.prototype={constructor:bt,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o,a,s,u,c,h,l,f,p,d=this._x1,y=this._y1,_=e-t,g=r-n,v=d-t,m=y-n,x=v*v+m*m;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=n):mt<x&&(Math.abs(m*_-g*v)>mt&&i?(s=_*_+g*g,u=(o=e-d)*o+(a=r-y)*a,c=Math.sqrt(s),h=Math.sqrt(x),f=(l=i*Math.tan((gt-Math.acos((s+x-u)/(2*c*h)))/2))/h,p=l/c,Math.abs(f-1)>mt&&(this._+="L"+(t+f*v)+","+(n+f*m)),this._+="A"+i+","+i+",0,0,"+ +(v*a<m*o)+","+(this._x1=t+p*_)+","+(this._y1=n+p*g)):this._+="L"+(this._x1=t)+","+(this._y1=n))},arc:function(t,n,e,r,i,o){t=+t,n=+n;var a=(e=+e)*Math.cos(r),s=e*Math.sin(r),u=t+a,c=n+s,h=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>mt||Math.abs(this._y1-c)>mt)&&(this._+="L"+u+","+c),e&&(l<0&&(l=l%vt+vt),xt<l?this._+="A"+e+","+e+",0,1,"+h+","+(t-a)+","+(n-s)+"A"+e+","+e+",0,1,"+h+","+(this._x1=u)+","+(this._y1=c):mt<l&&(this._+="A"+e+","+e+",0,"+ +(gt<=l)+","+h+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};function Mt(t){return function(){return t}}var kt=1e-12,Tt=Math.PI,Nt=Tt/2,St=2*Tt;function At(t){return t.innerRadius}function Ct(t){return t.outerRadius}function jt(t){return t.startAngle}function Pt(t){return t.endAngle}function Et(t){return t&&t.padAngle}function Ot(t){return 1<=t?Nt:t<=-1?-Nt:Math.asin(t)}function Dt(t,n,e,r,i,o,a){var s=t-e,u=n-r,c=(a?o:-o)/Math.sqrt(s*s+u*u),h=c*u,l=-c*s,f=t+h,p=n+l,d=e+h,y=r+l,_=(f+d)/2,g=(p+y)/2,v=d-f,m=y-p,x=v*v+m*m,b=i-o,w=f*y-d*p,M=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*x-w*w)),k=(w*m-v*M)/x,T=(-w*v-m*M)/x,N=(w*m+v*M)/x,S=(-w*v+m*M)/x,A=k-_,C=T-g,j=N-_,P=S-g;return j*j+P*P<A*A+C*C&&(k=N,T=S),{cx:k,cy:T,x01:-h,y01:-l,x11:k*(i/b-1),y11:T*(i/b-1)}}function qt(){var W=At,Z=Ct,$=Mt(0),Q=null,J=jt,G=Pt,K=Et,tt=null;function n(){var t,n,e,r,i,o,a,s,u,c,h,l,f,p,d,y,_,g,v,m,x,b,w,M,k,T,N,S,A,C,j,P,E,O,D,q,R,U,F,L,Y,z=+W.apply(this,arguments),H=+Z.apply(this,arguments),I=J.apply(this,arguments)-Nt,B=G.apply(this,arguments)-Nt,X=Math.abs(B-I),V=I<B;if(tt=tt||(t=wt()),H<z&&(n=H,H=z,z=n),kt<H?St-kt<X?(tt.moveTo(H*Math.cos(I),H*Math.sin(I)),tt.arc(0,0,H,I,B,!V),kt<z&&(tt.moveTo(z*Math.cos(B),z*Math.sin(B)),tt.arc(0,0,z,B,I,V))):(i=e=I,o=r=B,s=a=X,u=K.apply(this,arguments)/2,c=kt<u&&(Q?+Q.apply(this,arguments):Math.sqrt(z*z+H*H)),P=j=h=Math.min(Math.abs(H-z)/2,+$.apply(this,arguments)),kt<c&&(p=Ot(c/z*Math.sin(u)),d=Ot(c/H*Math.sin(u)),(a-=2*p)>kt?(i+=p*=V?1:-1,o-=p):(a=0,i=o=(I+B)/2),(s-=2*d)>kt?(e+=d*=V?1:-1,r-=d):(s=0,e=r=(I+B)/2)),y=H*Math.cos(e),_=H*Math.sin(e),g=z*Math.cos(o),v=z*Math.sin(o),kt<h&&(m=H*Math.cos(r),x=H*Math.sin(r),b=z*Math.cos(i),w=z*Math.sin(i),X<Tt&&(k=y-(M=kt<a?[(E=y)+(Y=((F=g-(D=m))*((O=_)-(q=x))-(L=v-q)*(E-D))/(L*(R=b-E)-F*(U=w-O)))*R,O+Y*U]:[g,v])[0],T=_-M[1],N=m-M[0],S=x-M[1],A=1/Math.sin(Math.acos((k*N+T*S)/(Math.sqrt(k*k+T*T)*Math.sqrt(N*N+S*S)))/2),C=Math.sqrt(M[0]*M[0]+M[1]*M[1]),j=Math.min(h,(z-C)/(A-1)),P=Math.min(h,(H-C)/(1+A)))),kt<s?kt<P?(l=Dt(b,w,y,_,H,P,V),f=Dt(m,x,g,v,H,P,V),tt.moveTo(l.cx+l.x01,l.cy+l.y01),P<h?tt.arc(l.cx,l.cy,P,Math.atan2(l.y01,l.x01),Math.atan2(f.y01,f.x01),!V):(tt.arc(l.cx,l.cy,P,Math.atan2(l.y01,l.x01),Math.atan2(l.y11,l.x11),!V),tt.arc(0,0,H,Math.atan2(l.cy+l.y11,l.cx+l.x11),Math.atan2(f.cy+f.y11,f.cx+f.x11),!V),tt.arc(f.cx,f.cy,P,Math.atan2(f.y11,f.x11),Math.atan2(f.y01,f.x01),!V))):(tt.moveTo(y,_),tt.arc(0,0,H,e,r,!V)):tt.moveTo(y,_),kt<z&&kt<a?kt<j?(l=Dt(g,v,m,x,z,-j,V),f=Dt(y,_,b,w,z,-j,V),tt.lineTo(l.cx+l.x01,l.cy+l.y01),j<h?tt.arc(l.cx,l.cy,j,Math.atan2(l.y01,l.x01),Math.atan2(f.y01,f.x01),!V):(tt.arc(l.cx,l.cy,j,Math.atan2(l.y01,l.x01),Math.atan2(l.y11,l.x11),!V),tt.arc(0,0,z,Math.atan2(l.cy+l.y11,l.cx+l.x11),Math.atan2(f.cy+f.y11,f.cx+f.x11),V),tt.arc(f.cx,f.cy,j,Math.atan2(f.y11,f.x11),Math.atan2(f.y01,f.x01),!V))):tt.arc(0,0,z,o,i,V):tt.lineTo(g,v)):tt.moveTo(0,0),tt.closePath(),t)return tt=null,t+""||null}return n.centroid=function(){var t=(+W.apply(this,arguments)+ +Z.apply(this,arguments))/2,n=(+J.apply(this,arguments)+ +G.apply(this,arguments))/2-Tt/2;return[Math.cos(n)*t,Math.sin(n)*t]},n.innerRadius=function(t){return arguments.length?(W="function"==typeof t?t:Mt(+t),n):W},n.outerRadius=function(t){return arguments.length?(Z="function"==typeof t?t:Mt(+t),n):Z},n.cornerRadius=function(t){return arguments.length?($="function"==typeof t?t:Mt(+t),n):$},n.padRadius=function(t){return arguments.length?(Q=null==t?null:"function"==typeof t?t:Mt(+t),n):Q},n.startAngle=function(t){return arguments.length?(J="function"==typeof t?t:Mt(+t),n):J},n.endAngle=function(t){return arguments.length?(G="function"==typeof t?t:Mt(+t),n):G},n.padAngle=function(t){return arguments.length?(K="function"==typeof t?t:Mt(+t),n):K},n.context=function(t){return arguments.length?(tt=null==t?null:t,n):tt},n}function Rt(t){this._context=t}Rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};function Ut(t){return new Rt(t)}function Ft(t){return t[0]}function Lt(t){return t[1]}function Yt(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function zt(t,n){this._context=t,this._k=(1-n)/6}function Ht(t,n){this._context=t,this._alpha=n}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Yt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Yt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},Ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e,r,i,o,a,s,u,c,h,l,f,p,d;switch(t=+t,n=+n,this._point&&(e=this._x2-t,r=this._y2-n,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:o=t,a=n,l=(i=this)._x1,f=i._y1,p=i._x2,d=i._y2,i._l01_a>kt&&(s=2*i._l01_2a+3*i._l01_a*i._l12_a+i._l12_2a,u=3*i._l01_a*(i._l01_a+i._l12_a),l=(l*s-i._x0*i._l12_2a+i._x2*i._l01_2a)/u,f=(f*s-i._y0*i._l12_2a+i._y2*i._l01_2a)/u),i._l23_a>kt&&(c=2*i._l23_2a+3*i._l23_a*i._l12_a+i._l12_2a,h=3*i._l23_a*(i._l23_a+i._l12_a),p=(p*c+i._x1*i._l23_2a-o*i._l12_2a)/h,d=(d*c+i._y1*i._l23_2a-a*i._l12_2a)/h),i._context.bezierCurveTo(l,f,p,d,i._x2,i._y2)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var It=function n(e){function t(t){return e?new Ht(t,e):new zt(t,0)}return t.alpha=function(t){return n(+t)},t}(.5);function Bt(t){return t<0?-1:1}function Xt(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Bt(o)+Bt(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Vt(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Wt(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*n,o-s,a-s*e,o,a)}function Zt(t){this._context=t}Zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wt(this,this._t0,Vt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Wt(this,Vt(this,e=Xt(this,t,n)),e);break;default:Wt(this,this._t0,e=Xt(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},Object.create(Zt.prototype).point=function(t,n){Zt.prototype.point.call(this,n,t)};function $t(t){var a,s,u,c,h,l,n=t.data,e=t.curve,r=void 0===e?Ut:e,i=t.canvasContext,o=t.className,f=t.classID,p=(a=Ft,s=Lt,u=Mt(!0),h=Ut,l=c=null,d.x=function(t){return arguments.length?(a="function"==typeof t?t:Mt(+t),d):a},d.y=function(t){return arguments.length?(s="function"==typeof t?t:Mt(+t),d):s},d.defined=function(t){return arguments.length?(u="function"==typeof t?t:Mt(!!t),d):u},d.curve=function(t){return arguments.length?(h=t,null!=c&&(l=h(c)),d):h},d.context=function(t){return arguments.length?(null==t?c=l=null:l=h(c=t),d):c},d.curve(r));function d(t){var n,e,r,i=t.length,o=!1;for(null==c&&(l=h(r=wt())),n=0;n<=i;++n)!(n<i&&u(e=t[n],n,t))===o&&((o=!o)?l.lineStart():l.lineEnd()),o&&l.point(+a(e,n,t),+s(e,n,t));if(r)return l=null,r+""||null}var y={type:"path",className:o,classID:f,data:n};return i?(p.context(i),y.pathMethods=p):y.attrs={d:p(n)},y}function Qt(t){var n=t.data,e=t.canvasContext,r={type:"path",className:t.className,classID:t.classID,data:n},i=qt().innerRadius(n.innerRadius||0).outerRadius(n.outerRadius||n.radius||2).startAngle(n.startAngle||0).endAngle(n.endAngle||2*Math.PI);return e?(i.context(e),r.pathMethods=lineGen):r.attrs={d:i()},r}function Jt(t){var n,e,r,i,o,a=t.type,s=t.subjectType,u=a.annotation,c=u.position,h=u.x-c.x,l=h+u.dx,f=u.y-c.y,p=f+u.dy,d=u.subject;return"circle"===s&&(d.outerRadius||d.radius)&&(n=Math.sqrt((h-l)*(h-l)+(f-p)*(f-p)),e=Math.asin(-p/n),r=d.outerRadius||d.radius+(d.radiusPadding||0),h=Math.abs(Math.cos(e)*r)*(l<0?-1:1),f=Math.abs(Math.sin(e)*r)*(p<0?-1:1)),"rect"===s&&(i=d.width,o=d.height,(0<i&&0<u.dx||i<0&&u.dx<0)&&(h=Math.abs(i)>Math.abs(u.dx)?i/2:i),(0<o&&0<u.dy||o<0&&u.dy<0)&&(f=Math.abs(o)>Math.abs(u.dy)?o/2:o),h===i/2&&f===o/2&&(h=l,f=p)),[[h,f],[l,p]]}function Gt(t){var n=t.type,e=t.connectorData,r=t.subjectType;(e=e||{}).points&&"number"!=typeof e.points||(e.points=tn(n.annotation.offset,e.points)),e.curve||(e.curve=It);var i,o=[];n.editMode&&(i=e.points.map(function(t,n){return g({},(e={cx:t[0],cy:t[1]},r=e.cx,i=void 0===r?0:r,o=e.cy,{move:{x:i,y:void 0===o?0:o}}),{index:n});var e,r,i,o}),o=n.mapHandles(i.map(function(t){return g({},t.move,{drag:function(t){e.points[t][0]+=Y.dx,e.points[t][1]+=Y.dy,n.redrawConnector()}.bind(n,t.index)})})));var a=[(a=Jt({type:n,subjectType:r}))[0]].concat(function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(e.points),[a[1]]);return{components:[$t({data:a,curve:e.curve,className:"connector"})],handles:o}}function Kt(t){var e=t.subjectData,r=t.type;e.radius||e.outerRadius||(e.radius=20);var n,i,o,a,s,u,c,h,l,f,p,d,y=[],_=Qt({data:e,className:"subject"});return r.editMode&&(a={r1:_.data.outerRadius||_.data.radius,r2:_.data.innerRadius,padding:e.radiusPadding},s=a.cx,u=void 0===s?0:s,c=a.cy,h=void 0===c?0:c,l=a.r1,f=a.r2,p=a.padding,d={move:{x:u,y:h}},void 0!==l&&(d.r1={x:u+l/Math.sqrt(2),y:h+l/Math.sqrt(2)}),void 0!==f&&(d.r2={x:u+f/Math.sqrt(2),y:h+f/Math.sqrt(2)}),void 0!==p&&(d.padding={x:u+l+p,y:h}),i=function(t){var n=e[t]+Y.dx*Math.sqrt(2);e[t]=n,r.redrawSubject(),r.redrawConnector()},o=[g({},(n=d).r1,{drag:i.bind(r,void 0!==e.outerRadius?"outerRadius":"radius")})],e.innerRadius&&o.push(g({},n.r2,{drag:i.bind(r,"innerRadius")})),y=r.mapHandles(o)),_.attrs["fill-opacity"]=0,{components:[_],handles:y}}var tn=function(t,n){for(var e=1<arguments.length&&void 0!==n?n:2,r=t.x/(e+1),i=t.y/(e+1),o=[],a=1;a<=e;a++)o.push([r*a+a%2*20,i*a-a%2*20]);return o},nn=(n(en,[{key:"init",value:function(t){this.annotation.x||this.mapX(t),this.annotation.y||this.mapY(t)}},{key:"mapY",value:function(t){t.y&&(this.annotation.y=t.y(this.annotation.data))}},{key:"mapX",value:function(t){t.x&&(this.annotation.x=t.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(v,t){var m=this;Array.isArray(t)||(t=[t]),t.filter(function(t){return t}).forEach(function(t){var n,e,r,i,o,a,s=t.type,u=t.className,c=t.attrs,h=t.handles,l=t.classID;if("handle"===s)n={group:v,r:c&&c.r,handles:h},e=n.group,r=n.handles,i=n.r,o=void 0===i?10:i,(a=e.selectAll("circle.handle").data(r)).enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(ft().container(K("g.annotations").node()).on("start",function(t){return t.start&&t.start(t)}).on("drag",function(t){return t.drag&&t.drag(t)}).on("end",function(t){return t.end&&t.end(t)})),e.selectAll("circle.handle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.r||o}).attr("class",function(t){return"handle "+(t.className||"")}),a.exit().remove();else{_n(v,[m.annotation],s,u,l);for(var f=v.select(s+"."+(l||u)),p=Object.keys(c),d=[],y=f.node().attributes,_=y.length-1;0<=_;_--){var g=y[_].name;-1===p.indexOf(g)&&"class"!==g&&d.push(g)}p.forEach(function(t){"text"===t?f.text(c[t]):f.attr(t,c[t])}),d.forEach(function(t){return f.attr(t,null)})}})}},{key:"getNoteBBox",value:function(){return mn(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var t=mn(this.note,".annotation-note-content"),n=this.noteContent.attr("transform").split(/\(|\,|\)/g);return t.offsetCornerX=parseFloat(n[1])+this.annotation.dx,t.offsetCornerY=parseFloat(n[2])+this.annotation.dy,t.offsetX=this.annotation.dx,t.offsetY=this.annotation.dy,t}},{key:"drawSubject",value:function(t){var n,e,r,i,o,a,s,u=this,c=0<arguments.length&&void 0!==t?t:{},h=this.annotation.subject,l=c.type,f={type:this,subjectData:h},p={};"circle"===l?p=Kt(f):"rect"===l?p=function(t){var n=t.subjectData,e=t.type;n.width||(n.width=100),n.height||(n.height=100);var r,i=[],o=n.width,a=n.height,s=$t({data:[[0,0],[o,0],[o,a],[0,a],[0,0]],className:"subject"});return e.editMode&&(r=[{x:o,y:a/2,drag:function(){n.width=Y.x,e.redrawSubject(),e.redrawConnector()}.bind(e)},{x:o/2,y:a,drag:function(){n.height=Y.y,e.redrawSubject(),e.redrawConnector()}.bind(e)}],i=e.mapHandles(r)),s.attrs["fill-opacity"]=.1,{components:[s],handles:i}}(f):"threshold"===l?(e=(n=f).subjectData,r=n.type.annotation.position,i=(void 0!==e.x1?e.x1:r.x)-r.x,o=(void 0!==e.x2?e.x2:r.x)-r.x,a=(void 0!==e.y1?e.y1:r.y)-r.y,s=(void 0!==e.y2?e.y2:r.y)-r.y,p={components:[$t({data:[[i,a],[o,s]],className:"subject"})]}):"badge"===l&&(p=function(t){var n=t.subjectData,e=void 0===n?{}:n,r=t.type,i=void 0===r?{}:r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=i.typeSettings&&i.typeSettings.subject;e.radius||(a&&a.radius?e.radius=a.radius:e.radius=14),e.x||a&&a.x&&(e.x=a.x),e.y||a&&a.y&&(e.y=a.y);var s=[],u=[],c=e.radius,h=.7*c,l=0,f=0,p=Math.sqrt(2)*c,d={xleftcorner:-c,xrightcorner:c,ytopcorner:-c,ybottomcorner:c,xleft:-p,xright:p,ytop:-p,ybottom:p};e.x&&!e.y?l=d["x"+e.x]:e.y&&!e.x?f=d["y"+e.y]:e.x&&e.y&&(l=d["x"+e.x+"corner"],f=d["y"+e.y+"corner"]);var y="translate("+l+", "+f+")",_=Qt({className:"subject",data:{radius:c}});_.attrs.transform=y,_.attrs.fill=o.color,_.attrs["stroke-linecap"]="round",_.attrs["stroke-width"]="3px";var g=Qt({className:"subject-ring",data:{outerRadius:c,innerRadius:h}});g.attrs.transform=y,g.attrs["stroke-width"]="3px",g.attrs.fill="white";var v,m,x=void 0;l&&f||!l&&!f?x=$t({className:"subject-pointer",data:[[0,0],[l||0,0],[0,f||0],[0,0]]}):(l||f)&&(x=$t({className:"subject-pointer",data:[[0,0],[(v=function(t,n){var e=1<arguments.length&&void 0!==n?n:1;return t&&t/Math.sqrt(2)/Math.sqrt(2)||e*c/Math.sqrt(2)})(l),v(f)],[v(l,-1),v(f,-1)],[0,0]]})),x&&(x.attrs.fill=o.color,x.attrs["stroke-linecap"]="round",x.attrs["stroke-width"]="3px",u.push(x)),i.editMode&&((m={x:2*l,y:2*f,drag:function(){e.x=Y.x<2*-c?"left":Y.x>2*c?"right":void 0,e.y=Y.y<2*-c?"top":Y.y>2*c?"bottom":void 0,i.redrawSubject()}.bind(i)}).x||m.y||(m.y=-c),s=i.mapHandles([m]));var b=void 0;return e.text&&(b={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:e.text,"text-anchor":"middle",dy:".25em",x:l,y:f}}),u.push(_),u.push(g),u.push(b),{components:u,handles:s}}(f,this.annotation));var d=p.components,y=void 0===d?[]:d,_=p.handles,g=void 0===_?[]:_;return y.forEach(function(t){t&&t.attrs&&!t.attrs.stroke&&(t.attrs.stroke=u.annotation.color)}),this.editMode&&(g=g.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),y.push({type:"handle",handles:g})),y}},{key:"drawConnector",value:function(t){var n=this,e=0<arguments.length&&void 0!==t?t:{},r=this.annotation.connector,i=r.type||e.type,o={type:this,connectorData:r};o.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var a,s={},u=(s="curve"===i?Gt(o):"elbow"===i?function(t){var n,e,r=t.type,i=t.subjectType,o=r.annotation,a=o.position,s=o.x-a.x,u=s+o.dx,c=o.y-a.y,h=c+o.dy,l=o.subject;"rect"===i&&(n=l.width,e=l.height,(0<n&&0<o.dx||n<0&&o.dx<0)&&(s=Math.abs(n)>Math.abs(o.dx)?n/2:n),(0<e&&0<o.dy||e<0&&o.dy<0)&&(c=Math.abs(e)>Math.abs(o.dy)?e/2:e),s===n/2&&c===e/2&&(s=u,c=h));var f,p,d,y,_=[[s,c],[u,h]],g=h-c,v=u-s,m=u,x=h,b=h<c&&s<u||u<s&&c<h?-1:1;return Math.abs(v)<Math.abs(g)?(m=u,x=c+v*b):(x=h,m=s+g*b),_="circle"===i&&(l.outerRadius||l.radius)?(p=(f=(l.outerRadius||l.radius)+(l.radiusPadding||0))/Math.sqrt(2),Math.abs(v)>p&&Math.abs(g)>p?[[s=p*(u<0?-1:1),c=p*(h<0?-1:1)],[m,x],[u,h]]:Math.abs(v)>Math.abs(g)?(d=Math.asin(-h/f),[[s=Math.abs(Math.cos(d)*f)*(u<0?-1:1),h],[u,h]]):(y=Math.acos(u/f),[[u,c=Math.abs(Math.sin(y)*f)*(h<0?-1:1)],[u,h]])):[[s,c],[m,x],[u,h]],{components:[$t({data:_,className:"connector"})]}}(o):(a=Jt(o),{components:[$t({data:a,className:"connector"})]})).components,c=void 0===u?[]:u,h=s.handles,l=void 0===h?[]:h,f=c[0];f&&(f.attrs.stroke=this.annotation.color,f.attrs.fill="none");var p,d,y,_,g,v,m,x=r.end||e.end,b={};return"arrow"===x?(p=f.data[1],d=f.data[0],Math.sqrt(Math.pow(p[0]-d[0],2)+Math.pow(p[1]-d[1],2))<5&&f.data[2]&&(p=f.data[2]),b=function(t){var n=t.annotation,e=t.start,r=t.end,i=t.scale,o=void 0===i?1:i,a=n.position,e=e?[-r[0]+e[0],-r[1]+e[1]]:[n.dx,n.dy],s=(r=r||[n.x-a.x,n.y-a.y])[0],u=r[1],c=e[0],h=e[1],l=10*o,f=16/180*Math.PI,p=Math.atan(h/c);c<0&&(p+=Math.PI);var d=[[s,u],[Math.cos(p+f)*l+s,Math.sin(p+f)*l+u],[Math.cos(p-f)*l+s,Math.sin(p-f)*l+u],[s,u]];return{components:[$t({data:d,className:"connector-end connector-arrow",classID:"connector-end"})]}}({annotation:this.annotation,start:p,end:d,scale:r.endScale})):"dot"===x?(y={line:f,scale:r.endScale},_=y.line,g=y.scale,v=void 0===g?1:g,(m=Qt({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(v)}})).attrs.transform="translate("+_.data[0][0]+", "+_.data[0][1]+")",b={components:[m]}):x&&"none"!==x||this.connector&&this.connector.select(".connector-end").remove(),b.components&&(b.components.forEach(function(t){t.attrs.fill=n.annotation.color,t.attrs.stroke=n.annotation.color}),c=c.concat(b.components)),this.editMode&&0!==l.length&&c.push({type:"handle",handles:l}),c}},{key:"drawNote",value:function(t){var n=this,e=0<arguments.length&&void 0!==t?t:{},r=this.annotation.note,i=r.align||e.align||"dynamic",o={bbox:e.bbox,align:i,offset:this.annotation.offset},a=r.lineType||e.lineType,s={};"vertical"===a?s=function(t){var n=t.align,e=t.x,r=void 0===e?0:e,i=t.y,o=void 0===i?0:i,a=t.bbox,s=t.offset;"top"===(n=pt(n,s.y))?o-=a.height:"middle"===n&&(o-=a.height/2);var u=[[r,o],[r,o+a.height]];return{components:[$t({data:u,className:"note-line"})]}}(o):"horizontal"===a&&(s=function(t){var n=t.align,e=t.x,r=void 0===e?0:e,i=t.y,o=void 0===i?0:i,a=t.offset,s=t.bbox;"right"===(n=dt(n,a.x))?r-=s.width:"middle"===n&&(r-=s.width/2);var u=[[r,o],[r+s.width,o]];return{components:[$t({data:u,className:"note-line"})]}}(o));var u,c,h,l=s.components,f=void 0===l?[]:l,p=s.handles,d=void 0===p?[]:p;return f.forEach(function(t){t.attrs.stroke=n.annotation.color}),this.editMode?(d=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),f.push({type:"handle",handles:d}),u=this.dragNote.bind(this),c=this.dragstarted.bind(this),h=this.dragended.bind(this),this.note.call(ft().container(K("g.annotations").node()).on("start",function(t){return c(t)}).on("drag",function(t){return u(t)}).on("end",function(t){return h(t)}))):this.note.on("mousedown.drag",null),f}},{key:"drawNoteContent",value:function(t){var n=this.annotation.note,e=void 0!==n.padding?n.padding:this.notePadding,r=n.orientation||t.orientation||"topBottom",i=n.lineType||t.lineType,o=n.align||t.align||"dynamic";"vertical"===i?r="leftRight":"horizontal"===i&&(r="topBottom");var a,s,u,c,h,l,f,p,d,y,_,g={padding:e,bbox:t.bbox,offset:this.annotation.offset,orientation:r,align:o},v=(s=(a=g).padding,u=void 0===s?0:s,c=a.bbox,h=void 0===c?{x:0,y:0,width:0,height:0}:c,l=a.align,f=a.orientation,p=a.offset,d=void 0===p?{x:0,y:0}:p,y=-h.x,_=0,-1!==yt.indexOf(f)?(l=dt(l,d.x),d.y<0&&"topBottom"===f||"top"===f?_-=h.height+u:_+=u,"middle"===l?y-=h.width/2:"right"===l&&(y-=h.width)):-1!==_t.indexOf(f)&&(l=pt(l,d.y),d.x<0&&"leftRight"===f||"left"===f?y-=h.width+u:y+=u,"middle"===l?_-=h.height/2:"top"===l&&(_-=h.height)),{x:y,y:_}),m=v.x,x=v.y;return this.offsetCornerX=m+this.annotation.dx,this.offsetCornerY=x+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+m+", "+x+")"),[]}},{key:"drawOnScreen",value:function(t,n){return this.drawOnSVG(t,n)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(t){var n=0<arguments.length&&void 0!==t?t:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:n})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:n}))}},{key:"setPosition",value:function(){var t=this.annotation.position;this.a.attr("transform","translate("+t.x+", "+t.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){var t;this.note&&(t=this.annotation.offset,this.note.attr("transform","translate("+t.x+", "+t.y+")"))}},{key:"setPositionWithAccessors",value:function(t){t&&this.annotation.data&&(this.mapX(t),this.mapY(t)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){Y.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var t=this.annotation.position;t.x+=Y.dx,t.y+=Y.dy,this.annotation.position=t}},{key:"dragNote",value:function(){var t=this.annotation.offset;t.x+=Y.dx,t.y+=Y.dy,this.annotation.offset=t}},{key:"mapHandles",value:function(t){var n=this;return t.map(function(t){return g({},t,{start:n.dragstarted.bind(n),end:n.dragended.bind(n)})})}}]),en);function en(t){var n,e=t.a,r=t.annotation,i=t.editMode,o=t.dispatcher,a=t.notePadding,s=t.accessors;b(this,en),this.a=e,this.note=-1===r.disable.indexOf("note")&&e.select("g.annotation-note"),this.noteContent=this.note&&e.select("g.annotation-note-content"),this.connector=-1===r.disable.indexOf("connector")&&e.select("g.annotation-connector"),this.subject=-1===r.disable.indexOf("subject")&&e.select("g.annotation-subject"),(this.dispatcher=o)&&((n=gn.bind(null,o,r))({component:this.note,name:"note"}),n({component:this.connector,name:"connector"}),n({component:this.subject,name:"subject"})),this.annotation=r,this.editMode=r.editMode||i,this.notePadding=void 0!==a?a:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&r.data&&this.init(s)}function rn(t,e,r){return o(i,t),n(i,[{key:"className",value:function(){return""+(e.className||a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"className",this)&&a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(t){return this.typeSettings.subject=g({},e.subject,this.typeSettings.subject),a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"drawSubject",this).call(this,g({},t,this.typeSettings.subject))}},{key:"drawConnector",value:function(t){return this.typeSettings.connector=g({},e.connector,this.typeSettings.connector),a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"drawConnector",this).call(this,g({},t,e.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(t){return this.typeSettings.note=g({},e.note,this.typeSettings.note),a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"drawNote",this).call(this,g({},t,e.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(t){return a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"drawNoteContent",this).call(this,g({},t,e.note,this.typeSettings.note))}}],[{key:"init",value:function(t,n){return a(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,t,n),r&&(t=r(t,n)),t}}]),i;function i(t){b(this,i);var n=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return(n.typeSettings=e).disable&&e.disable.forEach(function(t){n[t]&&n[t].remove(),n[t]=void 0,"note"===t&&(n.noteContent=void 0)}),n}}var on=(o(an,nn),n(an,[{key:"updateTextWrap",value:function(t){this.textWrap=t,this.drawText()}},{key:"drawText",value:function(){var t,n,e,r,i,o,a,s,u;this.note&&(_n(this.note,[this.annotation],"g","annotation-note-content"),t=this.note.select("g.annotation-note-content"),_n(t,[this.annotation],"rect","annotation-note-bg"),_n(t,[this.annotation],"text","annotation-note-label"),_n(t,[this.annotation],"text","annotation-note-title"),n={height:0},e=this.a.select("text.annotation-note-label"),r=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,i=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,a={top:0,bottom:0,left:0,right:0},"number"==typeof(o=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding)?a={top:o,bottom:o,left:o,right:o}:o&&"object"===(void 0===o?"undefined":c(o))&&(a=g(a,o)),this.annotation.note.title&&((s=this.a.select("text.annotation-note-title")).text(this.annotation.note.title),s.attr("fill",this.annotation.color),s.attr("font-weight","bold"),s.call(vn,r,i),n=s.node().getBBox()),e.text(this.annotation.note.label).attr("dx","0"),e.call(vn,r,i),e.attr("y",1.1*n.height||0),e.attr("fill",this.annotation.color),u=this.getNoteBBox(),this.a.select("rect.annotation-note-bg").attr("width",u.width+a.left+a.right).attr("height",u.height+a.top+a.bottom).attr("x",u.x-a.left).attr("y",-a.top).attr("fill","white").attr("fill-opacity",0))}}]),an);function an(t){b(this,an);var n=s(this,(an.__proto__||Object.getPrototypeOf(an)).call(this,t));return n.textWrap=t.textWrap||120,n.drawText(),n}var sn=rn(on,{className:"label",note:{align:"middle"}}),un=rn(on,{className:"callout",note:{lineType:"horizontal"}}),cn=rn(un,{className:"callout elbow",connector:{type:"elbow"}}),hn=rn(un,{className:"callout curve",connector:{type:"curve"}}),ln=rn(nn,{className:"badge",subject:{type:"badge"},disable:["connector","note"]}),fn=rn(on,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}}),pn=rn(on,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}});function dn(){return b(this,dn),s(this,(dn.__proto__||Object.getPrototypeOf(dn)).apply(this,arguments))}var yn=rn((o(dn,un),n(dn,[{key:"mapY",value:function(t){a(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"mapY",this).call(this,t);var n=this.annotation;(n.subject.x1||n.subject.x2)&&n.data&&t.y&&(n.y=t.y(n.data)),!n.subject.x1&&!n.subject.x2||n.x||(n.x=n.subject.x1||n.subject.x2)}},{key:"mapX",value:function(t){a(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"mapX",this).call(this,t);var n=this.annotation;(n.subject.y1||n.subject.y2)&&n.data&&t.x&&(n.x=t.x(n.data)),!n.subject.y1&&!n.subject.y2||n.y||(n.y=n.subject.y1||n.subject.y2)}}]),dn),{className:"callout xythreshold",subject:{type:"threshold"}}),_n=function(t,n,e,r,i){var o=t.selectAll(e+"."+(i||r)).data(n);return o.enter().append(e).merge(o).attr("class",r),o.exit().remove(),t},gn=function(t,n,e){var r=e.component,i=e.name;r&&r.on("mouseover.annotations",function(){t.call(i+"over",r,n)}).on("mouseout.annotations",function(){return t.call(i+"out",r,n)}).on("click.annotations",function(){return t.call(i+"click",r,n)})},vn=function(t,o,a,n){var s=3<arguments.length&&void 0!==n?n:1.2;t.each(function(){for(var t=K(this),n=t.text().split(a||/[ \t\r\n]+/).reverse().filter(function(t){return""!==t}),e=void 0,r=[],i=t.text(null).append("tspan").attr("x",0).attr("dy","0.8em");e=n.pop();)r.push(e),i.text(r.join(" ")),i.node().getComputedTextLength()>o&&1<r.length&&(r.pop(),i.text(r.join(" ")),r=[e],i=t.append("tspan").attr("x",0).attr("dy",s+"em").text(e))})},mn=function(t,n){var e=1<arguments.length&&void 0!==n?n:":not(.handle)";return t?t.selectAll(e).nodes().reduce(function(t,n){var e=n.getBBox();t.x=Math.min(t.x,e.x),t.y=Math.min(t.y,e.y),t.width=Math.max(t.width,e.width);var r=n&&n.attributes&&n.attributes.y;return t.height=Math.max(t.height,(r&&parseFloat(r.value)||0)+e.height),t},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}},xn={value:function(){}};function bn(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new wn(r)}function wn(t){this._=t}function Mn(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=xn,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function kn(){function e(t){y=t,c||t.selectAll("circle.handle").remove();var n=i.map(function(t){return t.type||(t.type=l),t.disable||(t.disable=a),new _(t)});o=o||new v({annotations:n,accessors:s,accessorsInverse:u,ids:h}),t.selectAll("g").data([o]).enter().append("g").attr("class","annotations");var e=t.select("g.annotations");_n(e,o.annotations,"g","annotation");var r=e.selectAll("g.annotation");r.each(function(t){var n=K(this);n.attr("class","annotation"),_n(n,[t],"g","annotation-connector"),_n(n,[t],"g","annotation-subject"),_n(n,[t],"g","annotation-note"),_n(n.select("g.annotation-note"),[t],"g","annotation-note-content"),t.type="[object Object]"===t.type.toString()?t.type:new t.type({a:n,annotation:t,textWrap:f,notePadding:p,editMode:c,dispatcher:d,accessors:s}),t.type.draw(),t.type.drawText&&t.type.drawText()})}var i=[],o=void 0,n=void 0,a=[],s={},u={},c=!1,h=void 0,l=un,f=void 0,p=void 0,d=bn("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),y=void 0;return e.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",o.json),window.copy(JSON.stringify(o.json.map(function(t){return delete t.type,t}))),e},e.update=function(){return i&&o&&(i=o.annotations.map(function(t){return t.type.draw(),t})),e},e.updateText=function(){return o&&(o.updateText(f),i=o.annotations),e},e.updatedAccessors=function(){return o.setPositionWithAccessors(),i=o.annotations,e},e.disable=function(t){return arguments.length?(a=t,o&&(o.updateDisable(a),i=o.annotations),e):a},e.textWrap=function(t){return arguments.length?(f=t,o&&(o.updateTextWrap(f),i=o.annotations),e):f},e.notePadding=function(t){return arguments.length?(p=t,o&&(o.updateNotePadding(p),i=o.annotations),e):p},e.type=function(t,n){return arguments.length?(l=t,o&&(o.annotations.map(function(t){t.type.note&&t.type.note.selectAll("*:not(.annotation-note-content)").remove(),t.type.noteContent&&t.type.noteContent.selectAll("*").remove(),t.type.subject&&t.type.subject.selectAll("*").remove(),t.type.connector&&t.type.connector.selectAll("*").remove(),t.type.typeSettings={},t.type=l,t.subject=n&&n.subject||t.subject,t.connector=n&&n.connector||t.connector,t.note=n&&n.note||t.note}),i=o.annotations),e):l},e.annotations=function(t){return arguments.length?(i=t,o&&o.annotations&&(i.some(function(t){return!t.type||"[object Object]"!==t.type.toString()})?(o=null,e(y)):o.annotations=i),e):o&&o.annotations||i},e.context=function(t){return arguments.length?(n=t,e):n},e.accessors=function(t){return arguments.length?(s=t,e):s},e.accessorsInverse=function(t){return arguments.length?(u=t,e):u},e.ids=function(t){return arguments.length?(h=t,e):h},e.editMode=function(t){return arguments.length?(c=t,y&&y.selectAll("g.annotation").classed("editable",c),o&&(o.editMode(c),i=o.annotations),e):c},e.collection=function(t){return arguments.length?(o=t,e):o},e.on=function(){var t=d.on.apply(d,arguments);return t===d?e:t},e}wn.prototype=bn.prototype={constructor:wn,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<s;)if(e=(t=o[a]).type)i[e]=Mn(i[e],t.name,n);else if(null==n)for(e in i)i[e]=Mn(i[e],t.name,null);return this}for(;++a<s;)if((e=(t=o[a]).type)&&(e=function(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new wn(t)},call:function(t,n){if(0<(e=arguments.length-2))for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var Tn={annotation:kn,annotationTypeBase:nn,annotationLabel:sn,annotationCallout:un,annotationCalloutCurve:hn,annotationCalloutElbow:cn,annotationCalloutCircle:fn,annotationCalloutRect:pn,annotationXYThreshold:yn,annotationBadge:ln,annotationCustomType:rn};t.annotation=kn,t.annotationTypeBase=nn,t.annotationLabel=sn,t.annotationCallout=un,t.annotationCalloutCurve=hn,t.annotationCalloutElbow=cn,t.annotationCalloutCircle=fn,t.annotationCalloutRect=pn,t.annotationXYThreshold=yn,t.annotationBadge=ln,t.annotationCustomType=rn,t.default=Tn,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],14:[function(t,n,e){var r,i;r=this,i=function(n,T){"use strict";function N(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function S(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function A(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function e(t){var r=t.dateTime,i=t.date,o=t.time,n=t.periods,e=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=j(n),h=P(n),l=j(e),f=P(e),p=j(a),d=P(a),y=j(s),_=P(s),g=j(u),v=P(u),m={a:function(t){return a[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:G,e:G,f:rt,H:K,I:tt,j:nt,L:et,m:it,M:ot,p:function(t){return n[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ot,s:Dt,S:at,u:st,U:ut,V:ct,w:ht,W:lt,x:null,X:null,y:ft,Y:pt,Z:dt,"%":Et},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:yt,e:yt,f:xt,H:_t,I:gt,j:vt,L:mt,m:bt,M:wt,p:function(t){return n[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ot,s:Dt,S:Mt,u:kt,U:Tt,V:Nt,w:St,W:At,x:null,X:null,y:Ct,Y:jt,Z:Pt,"%":Et},b={a:function(t,n,e){var r=p.exec(n.slice(e));return r?(t.w=d[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.w=f[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.m=v[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=y.exec(n.slice(e));return r?(t.m=_[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,n,e){return k(t,r,n,e)},d:H,e:H,f:Z,H:B,I:B,j:I,L:W,m:z,M:X,p:function(t,n,e){var r=c.exec(n.slice(e));return r?(t.p=h[r[0].toLowerCase()],e+r[0].length):-1},q:Y,Q:Q,s:J,S:V,u:O,U:D,V:q,w:E,W:R,x:function(t,n,e){return k(t,i,n,e)},X:function(t,n,e){return k(t,o,n,e)},y:F,Y:U,Z:L,"%":$};function w(u,c){return function(t){var n,e,r,i=[],o=-1,a=0,s=u.length;for(t instanceof Date||(t=new Date(+t));++o<s;)37===u.charCodeAt(o)&&(i.push(u.slice(a,o)),null!=(e=C[n=u.charAt(++o)])?n=u.charAt(++o):e="e"===n?" ":"0",(r=c[n])&&(n=r(t,e)),i.push(n),a=o+1);return i.push(u.slice(a,o)),i.join("")}}function M(i,o){return function(t){var n,e,r=A(1900,void 0,1);if(k(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!o||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(n=4<(e=(n=S(A(r.y,0,1))).getUTCDay())||0===e?T.utcMonday.ceil(n):T.utcMonday(n),n=T.utcDay.offset(n,7*(r.V-1)),r.y=n.getUTCFullYear(),r.m=n.getUTCMonth(),r.d=n.getUTCDate()+(r.w+6)%7):(n=4<(e=(n=N(A(r.y,0,1))).getDay())||0===e?T.timeMonday.ceil(n):T.timeMonday(n),n=T.timeDay.offset(n,7*(r.V-1)),r.y=n.getFullYear(),r.m=n.getMonth(),r.d=n.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),e="Z"in r?S(A(r.y,0,1)).getUTCDay():N(A(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(e+5)%7:r.w+7*r.U-(e+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,S(r)):N(r)}}function k(t,n,e,r){for(var i,o,a=0,s=n.length,u=e.length;a<s;){if(u<=r)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=b[i in C?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return m.x=w(i,m),m.X=w(o,m),m.c=w(r,m),x.x=w(i,x),x.X=w(o,x),x.c=w(r,x),{format:function(t){var n=w(t+="",m);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=w(t+="",x);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t+="",!0);return n.toString=function(){return t},n}}}var r,C={"-":"",_:" ",0:"0"},i=/^\s*\d+/,o=/^%/,a=/[\\^$*+?|[\]().{}]/g;function s(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function u(t){return t.replace(a,"\\$&")}function j(t){return new RegExp("^(?:"+t.map(u).join("|")+")","i")}function P(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function E(t,n,e){var r=i.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function O(t,n,e){var r=i.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function D(t,n,e){var r=i.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function q(t,n,e){var r=i.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function R(t,n,e){var r=i.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function U(t,n,e){var r=i.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function F(t,n,e){var r=i.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),e+r[0].length):-1}function L(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Y(t,n,e){var r=i.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function z(t,n,e){var r=i.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function H(t,n,e){var r=i.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function I(t,n,e){var r=i.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function B(t,n,e){var r=i.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function X(t,n,e){var r=i.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function V(t,n,e){var r=i.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function W(t,n,e){var r=i.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Z(t,n,e){var r=i.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function $(t,n,e){var r=o.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Q(t,n,e){var r=i.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function J(t,n,e){var r=i.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function G(t,n){return s(t.getDate(),n,2)}function K(t,n){return s(t.getHours(),n,2)}function tt(t,n){return s(t.getHours()%12||12,n,2)}function nt(t,n){return s(1+T.timeDay.count(T.timeYear(t),t),n,3)}function et(t,n){return s(t.getMilliseconds(),n,3)}function rt(t,n){return et(t,n)+"000"}function it(t,n){return s(t.getMonth()+1,n,2)}function ot(t,n){return s(t.getMinutes(),n,2)}function at(t,n){return s(t.getSeconds(),n,2)}function st(t){var n=t.getDay();return 0===n?7:n}function ut(t,n){return s(T.timeSunday.count(T.timeYear(t)-1,t),n,2)}function ct(t,n){var e=t.getDay();return t=4<=e||0===e?T.timeThursday(t):T.timeThursday.ceil(t),s(T.timeThursday.count(T.timeYear(t),t)+(4===T.timeYear(t).getDay()),n,2)}function ht(t){return t.getDay()}function lt(t,n){return s(T.timeMonday.count(T.timeYear(t)-1,t),n,2)}function ft(t,n){return s(t.getFullYear()%100,n,2)}function pt(t,n){return s(t.getFullYear()%1e4,n,4)}function dt(t){var n=t.getTimezoneOffset();return(0<n?"-":(n*=-1,"+"))+s(n/60|0,"0",2)+s(n%60,"0",2)}function yt(t,n){return s(t.getUTCDate(),n,2)}function _t(t,n){return s(t.getUTCHours(),n,2)}function gt(t,n){return s(t.getUTCHours()%12||12,n,2)}function vt(t,n){return s(1+T.utcDay.count(T.utcYear(t),t),n,3)}function mt(t,n){return s(t.getUTCMilliseconds(),n,3)}function xt(t,n){return mt(t,n)+"000"}function bt(t,n){return s(t.getUTCMonth()+1,n,2)}function wt(t,n){return s(t.getUTCMinutes(),n,2)}function Mt(t,n){return s(t.getUTCSeconds(),n,2)}function kt(t){var n=t.getUTCDay();return 0===n?7:n}function Tt(t,n){return s(T.utcSunday.count(T.utcYear(t)-1,t),n,2)}function Nt(t,n){var e=t.getUTCDay();return t=4<=e||0===e?T.utcThursday(t):T.utcThursday.ceil(t),s(T.utcThursday.count(T.utcYear(t),t)+(4===T.utcYear(t).getUTCDay()),n,2)}function St(t){return t.getUTCDay()}function At(t,n){return s(T.utcMonday.count(T.utcYear(t)-1,t),n,2)}function Ct(t,n){return s(t.getUTCFullYear()%100,n,2)}function jt(t,n){return s(t.getUTCFullYear()%1e4,n,4)}function Pt(){return"+0000"}function Et(){return"%"}function Ot(t){return+t}function Dt(t){return Math.floor(t/1e3)}function t(t){return r=e(t),n.timeFormat=r.format,n.timeParse=r.parse,n.utcFormat=r.utcFormat,n.utcParse=r.utcParse,r}t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var c="%Y-%m-%dT%H:%M:%S.%LZ";var h=Date.prototype.toISOString?function(t){return t.toISOString()}:n.utcFormat(c);var l=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:n.utcParse(c);n.isoFormat=h,n.isoParse=l,n.timeFormatDefaultLocale=t,n.timeFormatLocale=e,Object.defineProperty(n,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e,t("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-time"],i):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":15}],15:[function(t,n,e){var r,i;r=this,i=function(t){"use strict";var i=new Date,u=new Date;function c(o,a,e,r){function s(t){return o(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return o(t=new Date(+t)),t},s.ceil=function(t){return o(t=new Date(t-1)),a(t,1),o(t),t},s.round=function(t){var n=s(t),e=s.ceil(t);return t-n<e-t?n:e},s.offset=function(t,n){return a(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(t,n,e){var r,i=[];if(t=s.ceil(t),e=null==e?1:Math.floor(e),!(t<n&&0<e))return i;for(;i.push(r=new Date(+t)),a(t,e),o(t),r<t&&t<n;);return i},s.filter=function(e){return c(function(t){if(t<=t)for(;o(t),!e(t);)t.setTime(t-1)},function(t,n){if(t<=t)if(n<0)for(;++n<=0;)for(;a(t,-1),!e(t););else for(;0<=--n;)for(;a(t,1),!e(t););})},e&&(s.count=function(t,n){return i.setTime(+t),u.setTime(+n),o(i),o(u),Math.floor(e(i,u))},s.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?s.filter(r?function(t){return r(t)%n==0}:function(t){return s.count(0,t)%n==0}):s:null}),s}var n=c(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});n.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?c(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):n:null};var e=n.range,r=c(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),o=r.range,a=c(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,n){t.setTime(+t+6e4*n)},function(t,n){return(n-t)/6e4},function(t){return t.getMinutes()}),s=a.range,h=c(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),l=h.range,f=c(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1}),p=f.range;function d(n){return c(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var y=d(0),_=d(1),g=d(2),v=d(3),m=d(4),x=d(5),b=d(6),w=y.range,M=_.range,k=g.range,T=v.range,N=m.range,S=x.range,A=b.range,C=c(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),j=C.range,P=c(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});P.every=function(e){return isFinite(e=Math.floor(e))&&0<e?c(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var E=P.range,O=c(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+6e4*n)},function(t,n){return(n-t)/6e4},function(t){return t.getUTCMinutes()}),D=O.range,q=c(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()}),R=q.range,U=c(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1}),F=U.range;function L(n){return c(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/6048e5})}var Y=L(0),z=L(1),H=L(2),I=L(3),B=L(4),X=L(5),V=L(6),W=Y.range,Z=z.range,$=H.range,Q=I.range,J=B.range,G=X.range,K=V.range,tt=c(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),nt=tt.range,et=c(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});et.every=function(e){return isFinite(e=Math.floor(e))&&0<e?c(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var rt=et.range;t.timeDay=f,t.timeDays=p,t.timeFriday=x,t.timeFridays=S,t.timeHour=h,t.timeHours=l,t.timeInterval=c,t.timeMillisecond=n,t.timeMilliseconds=e,t.timeMinute=a,t.timeMinutes=s,t.timeMonday=_,t.timeMondays=M,t.timeMonth=C,t.timeMonths=j,t.timeSaturday=b,t.timeSaturdays=A,t.timeSecond=r,t.timeSeconds=o,t.timeSunday=y,t.timeSundays=w,t.timeThursday=m,t.timeThursdays=N,t.timeTuesday=g,t.timeTuesdays=k,t.timeWednesday=v,t.timeWednesdays=T,t.timeWeek=y,t.timeWeeks=w,t.timeYear=P,t.timeYears=E,t.utcDay=U,t.utcDays=F,t.utcFriday=X,t.utcFridays=G,t.utcHour=q,t.utcHours=R,t.utcMillisecond=n,t.utcMilliseconds=e,t.utcMinute=O,t.utcMinutes=D,t.utcMonday=z,t.utcMondays=Z,t.utcMonth=tt,t.utcMonths=nt,t.utcSaturday=V,t.utcSaturdays=K,t.utcSecond=r,t.utcSeconds=o,t.utcSunday=Y,t.utcSundays=W,t.utcThursday=B,t.utcThursdays=J,t.utcTuesday=H,t.utcTuesdays=$,t.utcWednesday=I,t.utcWednesdays=Q,t.utcWeek=Y,t.utcWeeks=W,t.utcYear=et,t.utcYears=rt,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],16:[function(t,n,e){!function(t){void 0!==n?n.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):this.domready=t()}(function(){var t,n=[],e=document,r=e.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(e.readyState);return o||e.addEventListener(i,t=function(){for(e.removeEventListener(i,t),o=1;t=n.shift();)t()}),function(t){o?setTimeout(t,0):n.push(t)}})},{}],17:[function(t,n,e){t("./science.v1"),n.exports=science},{"./science.v1":18}],18:[function(t,n,e){function P(t,n,e,r){var i,o;return Math.abs(e)>Math.abs(r)?[(t+(i=r/e)*n)/(o=e+i*r),(n-i*t)/o]:[((i=e/r)*t+n)/(o=r+i*e),(i*n-t)/o]}function _(t,n){if(t&&n&&t.length===n.length){for(var e=t.length,r=-1;++r<e;)if(t[r]!==n[r])return;return 1}}function F(t){for(var n=t.length,e=-1;++e<n;)if(!isFinite(t[e]))return;return 1}function L(t,n){for(var e=n+1;e<t.length&&0===t[e];)e++;return e}science={version:"1.9.3",ascending:function(t,n){return t-n},EULER:.5772156649015329,expm1:function(t){return t<1e-5&&-1e-5<t?t+.5*t*t:Math.exp(t)-1},functor:function(t){return"function"==typeof t?t:function(){return t}},hypot:function(t,n){var e;t=Math.abs(t);var r=((n=Math.abs(n))<t?(e=t,n):(e=n,t))/e;return e*Math.sqrt(1+r*r)},quadratic:function(){var i=!1;function n(t,n,e){var r=n*n-4*t*e;return 0<r?(r=Math.sqrt(r)/(2*t),i?[{r:-n-r,i:0},{r:-n+r,i:0}]:[-n-r,-n+r]):0===r?(r=-n/(2*t),i?[{r:r,i:0}]:[r]):i?[{r:-n,i:-(r=Math.sqrt(-r)/(2*t))},{r:-n,i:r}]:[]}return n.complex=function(t){return arguments.length?(i=t,n):i},n},zeroes:function(t){var n=-1,e=[];if(1===arguments.length)for(;++n<t;)e[n]=0;else for(;++n<t;)e[n]=science.zeroes.apply(this,Array.prototype.slice.call(arguments,1));return e},lin:{}},science.lin.decompose=function(){return function(t){for(var n=t.length,e=[],r=[],i=[],o=0;o<n;o++)e[o]=[],r[o]=[],i[o]=[];for(var a=!0,s=0;s<n;s++)for(o=0;o<n;o++)if(t[o][s]!==t[s][o]){a=!1;break}if(a){for(o=0;o<n;o++)e[o]=t[o].slice();!function(t,n,e){for(var r=e.length,i=0;i<r;i++)t[i]=e[r-1][i];for(var o=r-1;0<o;o--){for(var a=0,s=0,u=0;u<o;u++)a+=Math.abs(t[u]);if(0===a){n[o]=t[o-1];for(i=0;i<o;i++)t[i]=e[o-1][i],e[o][i]=0,e[i][o]=0}else{for(u=0;u<o;u++)t[u]/=a,s+=t[u]*t[u];var c=t[o-1],h=Math.sqrt(s);0<c&&(h=-h),n[o]=a*h,s-=c*h,t[o-1]=c-h;for(i=0;i<o;i++)n[i]=0;for(i=0;i<o;i++){c=t[i],e[i][o]=c,h=n[i]+e[i][i]*c;for(u=i+1;u<=o-1;u++)h+=e[u][i]*t[u],n[u]+=e[u][i]*c;n[i]=h}for(i=c=0;i<o;i++)n[i]/=s,c+=n[i]*t[i];for(var l=c/(s+s),i=0;i<o;i++)n[i]-=l*t[i];for(i=0;i<o;i++){c=t[i],h=n[i];for(u=i;u<=o-1;u++)e[u][i]-=c*n[u]+h*t[u];t[i]=e[o-1][i],e[o][i]=0}}t[o]=s}for(o=0;o<r-1;o++){if(e[r-1][o]=e[o][o],e[o][o]=1,0!=(s=t[o+1])){for(u=0;u<=o;u++)t[u]=e[u][o+1]/s;for(i=0;i<=o;i++){for(h=0,u=0;u<=o;u++)h+=e[u][o+1]*e[u][i];for(u=0;u<=o;u++)e[u][i]-=h*t[u]}}for(u=0;u<=o;u++)e[u][o+1]=0}for(i=0;i<r;i++)t[i]=e[r-1][i],e[r-1][i]=0;e[r-1][r-1]=1,n[0]=0}(r,i,e),function(t,n,e){for(var r=e.length,i=1;i<r;i++)n[i-1]=n[i];for(var o=n[r-1]=0,a=0,s=0;s<r;s++){a=Math.max(a,Math.abs(t[s])+Math.abs(n[s]));for(var u=s;u<r&&!(Math.abs(n[u])<=1e-12*a);)u++;if(s<u){do{0;var c=t[s],h=(t[s+1]-c)/(2*n[s]),l=science.hypot(h,1);h<0&&(l=-l),t[s]=n[s]/(h+l),t[s+1]=n[s]*(h+l);for(var f=t[s+1],p=c-t[s],i=s+2;i<r;i++)t[i]-=p;o+=p,h=t[u];for(var d=1,y=d,_=d,g=n[s+1],v=0,m=0,i=u-1;s<=i;i--){_=y,m=v,c=(y=d)*n[i],p=d*h,l=science.hypot(h,n[i]),n[i+1]=v*l,v=n[i]/l,h=(d=h/l)*t[i]-v*c,t[i+1]=p+v*(d*c+v*t[i]);for(var x=0;x<r;x++)p=e[x][i+1],e[x][i+1]=v*e[x][i]+d*p,e[x][i]=d*e[x][i]-v*p}h=-v*m*_*g*n[s]/f,n[s]=v*h,t[s]=d*h}while(Math.abs(n[s])>1e-12*a)}t[s]=t[s]+o,n[s]=0}for(i=0;i<r-1;i++){for(var x=i,h=t[i],b=i+1;b<r;b++)t[b]<h&&(h=t[x=b]);if(x!=i){t[x]=t[i],t[i]=h;for(b=0;b<r;b++)h=e[b][i],e[b][i]=e[b][x],e[b][x]=h}}}(r,i,e)}else{for(var u=[],o=0;o<n;o++)u[o]=t[o].slice();!function(t,n){for(var e=t.length,r=[],i=e-1,o=1;o<i;o++){for(var a=0,s=o;s<=i;s++)a+=Math.abs(t[s][o-1]);if(0!==a){for(var u=0,s=i;o<=s;s--)r[s]=t[s][o-1]/a,u+=r[s]*r[s];var c=Math.sqrt(u);0<r[o]&&(c=-c),u-=r[o]*c,r[o]=r[o]-c;for(var h=o;h<e;h++){for(var l=0,s=i;o<=s;s--)l+=r[s]*t[s][h];l/=u;for(s=o;s<=i;s++)t[s][h]-=l*r[s]}for(s=0;s<=i;s++){for(l=0,h=i;o<=h;h--)l+=r[h]*t[s][h];l/=u;for(h=o;h<=i;h++)t[s][h]-=l*r[h]}r[o]=a*r[o],t[o][o-1]=a*c}}for(s=0;s<e;s++)for(h=0;h<e;h++)n[s][h]=s===h?1:0;for(o=i-1;1<=o;o--)if(0!==t[o][o-1]){for(s=o+1;s<=i;s++)r[s]=t[s][o-1];for(h=o;h<=i;h++){for(c=0,s=o;s<=i;s++)c+=r[s]*n[s][h];c=c/r[o]/t[o][o-1];for(s=o;s<=i;s++)n[s][h]+=c*r[s]}}}(u,e),function(t,n,e,r){for(var i,o,a,s,u=e.length,c=u-1,h=u-1,l=1e-12,f=0,p=0,d=0,y=0,_=0,g=0,v=0,m=0;m<u;m++){(m<0||h<m)&&(t[m]=e[m][m],n[m]=0);for(var x=Math.max(m-1,0);x<u;x++)v+=Math.abs(e[m][x])}var b=0;for(;0<=c;){for(var w=c;0<w&&(0===(_=Math.abs(e[w-1][w-1])+Math.abs(e[w][w]))&&(_=v),!(Math.abs(e[w][w-1])<l*_));)w--;if(w===c)e[c][c]=e[c][c]+f,t[c]=e[c][c],n[c]=0,c--,b=0;else if(w===c-1){if(o=e[c][c-1]*e[c-1][c],p=(e[c-1][c-1]-e[c][c])/2,d=p*p+o,g=Math.sqrt(Math.abs(d)),e[c][c]=e[c][c]+f,e[c-1][c-1]=e[c-1][c-1]+f,a=e[c][c],0<=d){g=p+(0<=p?g:-g),t[c-1]=a+g,t[c]=t[c-1],0!==g&&(t[c]=a-o/g),n[c-1]=0,n[c]=0,a=e[c][c-1],_=Math.abs(a)+Math.abs(g),p=a/_,d=g/_,y=Math.sqrt(p*p+d*d),p/=y,d/=y;for(x=c-1;x<u;x++)g=e[c-1][x],e[c-1][x]=d*g+p*e[c][x],e[c][x]=d*e[c][x]-p*g;for(m=0;m<=c;m++)g=e[m][c-1],e[m][c-1]=d*g+p*e[m][c],e[m][c]=d*e[m][c]-p*g;for(m=0;m<=h;m++)g=r[m][c-1],r[m][c-1]=d*g+p*r[m][c],r[m][c]=d*r[m][c]-p*g}else t[c-1]=a+p,t[c]=a+p,n[c-1]=g,n[c]=-g;c-=2,b=0}else{if(a=e[c][c],o=s=0,w<c&&(s=e[c-1][c-1],o=e[c][c-1]*e[c-1][c]),10==b){f+=a;for(m=0;m<=c;m++)e[m][m]-=a;_=Math.abs(e[c][c-1])+Math.abs(e[c-1][c-2]),a=s=.75*_,o=-.4375*_*_}if(30==b&&0<(_=(_=(s-a)/2)*_+o)){_=Math.sqrt(_),s<a&&(_=-_),_=a-o/((s-a)/2+_);for(m=0;m<=c;m++)e[m][m]-=_;f+=_,a=s=o=.964}b++;for(var M=c-2;w<=M&&(g=e[M][M],p=((y=a-g)*(_=s-g)-o)/e[M+1][M]+e[M][M+1],d=e[M+1][M+1]-g-y-_,y=e[M+2][M+1],_=Math.abs(p)+Math.abs(d)+Math.abs(y),p/=_,d/=_,y/=_,M!=w)&&!(Math.abs(e[M][M-1])*(Math.abs(d)+Math.abs(y))<l*(Math.abs(p)*(Math.abs(e[M-1][M-1])+Math.abs(g)+Math.abs(e[M+1][M+1]))));)M--;for(m=M+2;m<=c;m++)e[m][m-2]=0,M+2<m&&(e[m][m-3]=0);for(var k=M;k<=c-1;k++){var T=k!=c-1;if(k!=M&&(p=e[k][k-1],d=e[k+1][k-1],y=T?e[k+2][k-1]:0,0!=(a=Math.abs(p)+Math.abs(d)+Math.abs(y))&&(p/=a,d/=a,y/=a)),0==a)break;if(_=Math.sqrt(p*p+d*d+y*y),p<0&&(_=-_),0!=_){k!=M?e[k][k-1]=-_*a:w!=M&&(e[k][k-1]=-e[k][k-1]),a=(p+=_)/_,s=d/_,g=y/_,d/=p,y/=p;for(x=k;x<u;x++)p=e[k][x]+d*e[k+1][x],T&&(p+=y*e[k+2][x],e[k+2][x]=e[k+2][x]-p*g),e[k][x]=e[k][x]-p*a,e[k+1][x]=e[k+1][x]-p*s;for(m=0;m<=Math.min(c,k+3);m++)p=a*e[m][k]+s*e[m][k+1],T&&(p+=g*e[m][k+2],e[m][k+2]=e[m][k+2]-p*y),e[m][k]=e[m][k]-p,e[m][k+1]=e[m][k+1]-p*d;for(m=0;m<=h;m++)p=a*r[m][k]+s*r[m][k+1],T&&(p+=g*r[m][k+2],r[m][k+2]=r[m][k+2]-p*y),r[m][k]=r[m][k]-p,r[m][k+1]=r[m][k+1]-p*d}}}}if(0==v)return;for(c=u-1;0<=c;c--)if(p=t[c],0==(d=n[c])){w=c;e[c][c]=1;for(m=c-1;0<=m;m--){o=e[m][m]-p,y=0;for(x=w;x<=c;x++)y+=e[m][x]*e[x][c];if(n[m]<0)g=o,_=y;else if(0===n[w=m]?e[m][c]=-y/(0!==o?o:l*v):(a=e[m][m+1],s=e[m+1][m],d=(t[m]-p)*(t[m]-p)+n[m]*n[m],i=(a*_-g*y)/d,e[m][c]=i,Math.abs(a)>Math.abs(g)?e[m+1][c]=(-y-o*i)/a:e[m+1][c]=(-_-s*i)/g),i=Math.abs(e[m][c]),1<l*i*i)for(x=m;x<=c;x++)e[x][c]=e[x][c]/i}}else if(d<0){w=c-1;Math.abs(e[c][c-1])>Math.abs(e[c-1][c])?(e[c-1][c-1]=d/e[c][c-1],e[c-1][c]=-(e[c][c]-p)/e[c][c-1]):(A=P(0,-e[c-1][c],e[c-1][c-1]-p,d),e[c-1][c-1]=A[0],e[c-1][c]=A[1]),e[c][c-1]=0,e[c][c]=1;for(m=c-2;0<=m;m--){for(var N,S,A,C=0,j=0,x=w;x<=c;x++)C+=e[m][x]*e[x][c-1],j+=e[m][x]*e[x][c];if(o=e[m][m]-p,n[m]<0)g=o,y=C,_=j;else if(0==n[w=m]?(A=P(-C,-j,o,d),e[m][c-1]=A[0],e[m][c]=A[1]):(a=e[m][m+1],s=e[m+1][m],N=(t[m]-p)*(t[m]-p)+n[m]*n[m]-d*d,S=2*(t[m]-p)*d,0==N&0==S&&(N=l*v*(Math.abs(o)+Math.abs(d)+Math.abs(a)+Math.abs(s)+Math.abs(g))),A=P(a*y-g*C+d*j,a*_-g*j-d*C,N,S),e[m][c-1]=A[0],e[m][c]=A[1],Math.abs(a)>Math.abs(g)+Math.abs(d)?(e[m+1][c-1]=(-C-o*e[m][c-1]+d*e[m][c])/a,e[m+1][c]=(-j-o*e[m][c]-d*e[m][c-1])/a):(A=P(-y-s*e[m][c-1],-_-s*e[m][c],g,d),e[m+1][c-1]=A[0],e[m+1][c]=A[1])),i=Math.max(Math.abs(e[m][c-1]),Math.abs(e[m][c])),1<l*i*i)for(x=m;x<=c;x++)e[x][c-1]=e[x][c-1]/i,e[x][c]=e[x][c]/i}}for(m=0;m<u;m++)if(m<0||h<m)for(x=m;x<u;x++)r[m][x]=e[m][x];for(x=u-1;0<=x;x--)for(m=0;m<=h;m++){for(k=g=0;k<=Math.min(x,h);k++)g+=r[m][k]*e[k][x];r[m][x]=g}}(r,i,u,e)}for(var c=[],o=0;o<n;o++){for(var h=c[o]=[],s=0;s<n;s++)h[s]=o===s?r[o]:0;c[o][0<i[o]?o+1:o-1]=i[o]}return{D:c,V:e}}},science.lin.cross=function(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]},science.lin.dot=function(t,n){for(var e=0,r=-1,i=Math.min(t.length,n.length);++r<i;)e+=t[r]*n[r];return e},science.lin.length=function(t){return Math.sqrt(science.lin.dot(t,t))},science.lin.normalize=function(t){var n=science.lin.length(t);return t.map(function(t){return t/n})},science.lin.determinant=function(t){var n=t[0].concat(t[1]).concat(t[2]).concat(t[3]);return n[12]*n[9]*n[6]*n[3]-n[8]*n[13]*n[6]*n[3]-n[12]*n[5]*n[10]*n[3]+n[4]*n[13]*n[10]*n[3]+n[8]*n[5]*n[14]*n[3]-n[4]*n[9]*n[14]*n[3]-n[12]*n[9]*n[2]*n[7]+n[8]*n[13]*n[2]*n[7]+n[12]*n[1]*n[10]*n[7]-n[0]*n[13]*n[10]*n[7]-n[8]*n[1]*n[14]*n[7]+n[0]*n[9]*n[14]*n[7]+n[12]*n[5]*n[2]*n[11]-n[4]*n[13]*n[2]*n[11]-n[12]*n[1]*n[6]*n[11]+n[0]*n[13]*n[6]*n[11]+n[4]*n[1]*n[14]*n[11]-n[0]*n[5]*n[14]*n[11]-n[8]*n[5]*n[2]*n[15]+n[4]*n[9]*n[2]*n[15]+n[8]*n[1]*n[6]*n[15]-n[0]*n[9]*n[6]*n[15]-n[4]*n[1]*n[10]*n[15]+n[0]*n[5]*n[10]*n[15]},science.lin.gaussjordan=function(t,n){n=n||1e-10;for(var e=t.length,r=t[0].length,i=-1;++i<e;){for(var o=i,a=i;++a<e;)Math.abs(t[a][i])>Math.abs(t[o][i])&&(o=a);var s=t[i];if(t[i]=t[o],t[o]=s,Math.abs(t[i][i])<=n)return!1;for(a=i;++a<e;)for(var u=t[a][i]/t[i][i],c=i-1;++c<r;)t[a][c]-=t[i][c]*u}for(i=e;0<=--i;){u=t[i][i];for(a=-1;++a<i;)for(c=r;--c>=i;)t[a][c]-=t[i][c]*t[a][i]/u;for(t[i][i]/=u,c=e-1;++c<r;)t[i][c]/=u}return!0},science.lin.inverse=function(t){var i=t.length,n=-1;if(i===t[0].length){for(t=t.map(function(t,n){for(var e=new Array(i),r=-1;++r<i;)e[r]=n===r?1:0;return t.concat(e)}),science.lin.gaussjordan(t);++n<i;)t[n]=t[n].slice(i);return t}},science.lin.multiply=function(t,n){var e,r=t.length,i=n[0].length,o=n.length,a=-1;if(o!==t[0].length)throw{error:"columns(a) != rows(b); "+t[0].length+" != "+o};for(var s=new Array(r);++a<r;)for(s[a]=new Array(i),e=-1;++e<i;){for(var u=0,c=-1;++c<o;)u+=t[a][c]*n[c][e];s[a][e]=u}return s},science.lin.transpose=function(t){for(var n,e=t.length,r=t[0].length,i=-1,o=new Array(r);++i<r;)for(o[i]=new Array(e),n=-1;++n<e;)o[i][n]=t[n][i];return o},science.lin.tridag=function(t,n,e,r,i,o){for(var a,s=1;s<o;s++)a=t[s]/n[s-1],n[s]-=a*e[s-1],r[s]-=a*r[s-1];for(i[o-1]=r[o-1]/n[o-1],s=o-2;0<=s;s--)i[s]=(r[s]-e[s]*i[s+1])/n[s]},science.stats={},science.stats.bandwidth={nrd0:function(t){var n=Math.sqrt(science.stats.variance(t));return(lo=Math.min(n,science.stats.iqr(t)/1.34))||(lo=n)||(lo=Math.abs(t[1]))||(lo=1),.9*lo*Math.pow(t.length,-.2)},nrd:function(t){var n=science.stats.iqr(t)/1.34;return 1.06*Math.min(Math.sqrt(science.stats.variance(t)),n)*Math.pow(t.length,-.2)}},science.stats.distance={euclidean:function(t,n){for(var e,r=t.length,i=-1,o=0;++i<r;)o+=(e=t[i]-n[i])*e;return Math.sqrt(o)},manhattan:function(t,n){for(var e=t.length,r=-1,i=0;++r<e;)i+=Math.abs(t[r]-n[r]);return i},minkowski:function(o){return function(t,n){for(var e=t.length,r=-1,i=0;++r<e;)i+=Math.pow(Math.abs(t[r]-n[r]),o);return Math.pow(i,1/o)}},chebyshev:function(t,n){for(var e,r=t.length,i=-1,o=0;++i<r;)o<(e=Math.abs(t[i]-n[i]))&&(o=e);return o},hamming:function(t,n){for(var e=t.length,r=-1,i=0;++r<e;)t[r]!==n[r]&&i++;return i},jaccard:function(t,n){for(var e=t.length,r=-1,i=0;++r<e;)t[r]===n[r]&&i++;return i/e},braycurtis:function(t,n){for(var e,r,i=t.length,o=-1,a=0,s=0;++o<i;)e=t[o],r=n[o],a+=Math.abs(e-r),s+=Math.abs(e+r);return a/s}},science.stats.erf=function(t){var n=t<0?-1:1;t<0&&(n=-1,t=-t);var e=1/(1+.3275911*t);return n*(1-((((1.061405429*e-1.453152027)*e+1.421413741)*e-.284496736)*e+.254829592)*e*Math.exp(-t*t))},science.stats.phi=function(t){return.5*(1+science.stats.erf(t/Math.SQRT2))},science.stats.kernel={uniform:function(t){return t<=1&&-1<=t?.5:0},triangular:function(t){return t<=1&&-1<=t?1-Math.abs(t):0},epanechnikov:function(t){return t<=1&&-1<=t?.75*(1-t*t):0},quartic:function(t){if(t<=1&&-1<=t){var n=1-t*t;return.9375*n*n}return 0},triweight:function(t){if(t<=1&&-1<=t){var n=1-t*t;return 35/32*n*n*n}return 0},gaussian:function(t){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*t*t)},cosine:function(t){return t<=1&&-1<=t?Math.PI/4*Math.cos(Math.PI/2*t):0}},science.stats.kde=function(){var o=science.stats.kernel.gaussian,a=[],e=science.stats.bandwidth.nrd;function n(t,n){var i=e.call(this,a);return t.map(function(t){for(var n=-1,e=0,r=a.length;++n<r;)e+=o((t-a[n])/i);return[t,e/i/r]})}return n.kernel=function(t){return arguments.length?(o=t,n):o},n.sample=function(t){return arguments.length?(a=t,n):a},n.bandwidth=function(t){return arguments.length?(e=science.functor(t),n):e},n},science.stats.kmeans=function(){var d=science.stats.distance.euclidean,y=1;function n(t){for(var n,e,r,i,o,a,s,u=t.length,c=[],h=[],l=1,f=0,p=function(t,n){var e=n.length;if(e<t)return null;var r,i,o,a=[],s=[],u={},c=0,h=0;for(;h<t;){if(c===e)return null;var l=Math.floor(Math.random()*e);if(!(l in u)){for(u[l]=1,c++,i=n[l],o=!0,r=0;r<h;r++)if(_(i,a[r])){o=!1;break}o&&(a[h]=i,s[h]=l,h++)}}return a}(y,t);l&&f<1e3;){for(r=-1;++r<y;)h[r]=0;for(e=-1;++e<u;){for(i=t[e],a=1/0,r=-1;++r<y;)(o=d.call(this,p[r],i))<a&&(a=o,s=r);h[c[e]=s]++}for(n=[],e=-1;++e<u;)if(null==(o=n[i=c[e]]))n[i]=t[e].slice();else for(r=-1;++r<o.length;)o[r]+=t[e][r];for(r=-1;++r<y;)for(i=n[r],o=1/h[r],e=-1;++e<i.length;)i[e]*=o;for(l=0,r=-1;++r<y;)if(!_(n[r],p[r])){l=1;break}p=n,f++}return{assignments:c,centroids:p}}return n.k=function(t){return arguments.length?(y=t,n):y},n.distance=function(t){return arguments.length?(d=t,n):d},n},science.stats.hcluster=function(){var y=science.stats.distance.euclidean;function n(t){for(var n,e,r,i,o,a,s,u=t.length,c=[],h=[],l=[],f=[],p=-1;++p<u;)for(c[p]=0,l[p]=[],s=-1;++s<u;)l[p][s]=p===s?1/0:y(t[p],t[s]),l[p][c[p]]>l[p][s]&&(c[p]=s);for(p=-1;++p<u;)f[p]=[],f[p][0]={left:null,right:null,dist:0,centroid:t[p],size:1,depth:0},h[p]=1;for(o=0;o<u-1;o++){for(p=n=0;p<u;p++)l[p][c[p]]<l[n][c[n]]&&(n=p);e=c[n];var d={left:r=f[n][0],right:i=f[e][0],dist:l[n][e],centroid:function(t,n,e,r){var i=[],o=t+e,a=n.length,s=-1;for(;++s<a;)i[s]=(t*n[s]+e*r[s])/o;return i}(r.size,r.centroid,i.size,i.centroid),size:r.size+i.size,depth:1+Math.max(r.depth,i.depth)};for(f[n].splice(0,0,d),h[n]+=h[e],s=0;s<u;s++)l[n][s]>l[e][s]&&(l[s][n]=l[n][s]=l[e][s]);for(l[n][n]=1/0,p=0;p<u;p++)l[p][e]=l[e][p]=1/0;for(s=0;s<u;s++)c[s]==e&&(c[s]=n),l[n][s]<l[n][c[n]]&&(c[n]=s);a=d}return a}return n.distance=function(t){return arguments.length?(y=t,n):y},n},science.stats.iqr=function(t){var n=science.stats.quantiles(t,[.25,.75]);return n[1]-n[0]},science.stats.loess=function(){var q=.3,R=2,U=1e-12;function n(t,n,e){var r=t.length;if(r!==n.length)throw{error:"Mismatched array lengths"};if(0==r)throw{error:"At least one point required."};if(arguments.length<3)for(e=[],f=-1;++f<r;)e[f]=1;if(F(t),F(n),F(e),function(t){var n=t.length,e=0;for(;++e<n;)if(t[e-1]>=t[e])return}(t),1==r)return[n[0]];if(2==r)return[n[0],n[1]];var i=Math.floor(q*r);if(i<2)throw{error:"Bandwidth too small."};var o=[],a=[],s=[];for(f=-1;++f<r;)o[f]=0,a[f]=0,s[f]=1;for(var u,c=-1;++c<=R;){for(var h,l=[0,i-1],f=-1;++f<r;){h=t[f],0<f&&function(t,n,e,r){var i=r[0],o=r[1],a=L(n,o);{var s;a<t.length&&t[a]-t[e]<t[e]-t[i]&&(s=L(n,i),r[0]=s,r[1]=a)}}(t,e,f,l);for(var p=l[0],d=l[1],y=t[f]-t[p]>t[d]-t[f]?p:d,_=0,g=0,v=0,m=0,x=0,b=Math.abs(1/(t[y]-h)),w=p;w<=d;++w){var M=t[w],k=n[w],T=M*(O=(u=1-(u=(w<f?h-M:M-h)*b)*u*u)*u*u*s[w]*e[w]);_+=O,g+=T,v+=M*T,m+=k*O,x+=k*T}var N=g/_,S=m/_,A=x/_,C=v/_,j=Math.sqrt(Math.abs(C-N*N))<U?0:(A-N*S)/(C-N*N),P=S-j*N;o[f]=j*h+P,a[f]=Math.abs(n[f]-o[f])}if(c===R)break;var E,O,D=science.stats.median(a);if(Math.abs(D)<U)break;for(f=-1;++f<r;)E=a[f]/(6*D),s[f]=1<=E?0:(O=1-E*E)*O}return o}return n.bandwidth=function(t){return arguments.length?(q=t,n):t},n.robustnessIterations=function(t){return arguments.length?(R=t,n):t},n.accuracy=function(t){return arguments.length?(U=t,n):t},n},science.stats.mean=function(t){var n=t.length;if(0===n)return NaN;for(var e=0,r=-1;++r<n;)e+=(t[r]-e)/(r+1);return e},science.stats.median=function(t){return science.stats.quantiles(t,[.5])[0]},science.stats.mode=function(t){for(var n,e,r={},i=[],o=0,a=t.length,s=-1;++s<a;)(e=r.hasOwnProperty(n=t[s])?++r[n]:r[n]=1)===o?i.push(n):o<e&&(o=e,i=[n]);if(1===i.length)return i[0]},science.stats.quantiles=function(o,t){var a=(o=o.slice().sort(science.ascending)).length-1;return t.map(function(t){if(0===t)return o[0];if(1===t)return o[a];var n=1+t*a,e=Math.floor(n),r=n-e,i=o[e-1];return 0==r?i:i+r*(o[e]-i)})},science.stats.variance=function(t){var n=t.length;if(n<1)return NaN;if(1===n)return 0;for(var e=science.stats.mean(t),r=-1,i=0;++r<n;){var o=t[r]-e;i+=o*o}return i/(n-1)},science.stats.distribution={},science.stats.distribution.gaussian=function(){var r=Math.random,i=0,o=1,n=1;function e(){for(var t,n,e;1<=(e=(t=2*r()-1)*t+(n=2*r()-1)*n)||0===e;);return i+o*t*Math.sqrt(-2*Math.log(e)/e)}return e.pdf=function(t){return t=(t-i)/o,science_stats_distribution_gaussianConstant*Math.exp(-.5*t*t)/o},e.cdf=function(t){return t=(t-i)/o,.5*(1+science.stats.erf(t/Math.SQRT2))},e.mean=function(t){return arguments.length?(i=+t,e):i},e.variance=function(t){return arguments.length?(o=Math.sqrt(n=+t),e):n},e.random=function(t){return arguments.length?(r=t,e):r},e},science_stats_distribution_gaussianConstant=1/Math.sqrt(2*Math.PI)},{}],19:[function(t,n,e){"use strict";var d=t("d3-selection"),y=t("d3-fetch"),x=t("d3-scale"),b=t("d3-array"),w=t("d3-axis"),M=t("d3-shape"),p=t("./utils"),k=t("science"),_=t("d3-svg-annotation");t("domready")(function(){(0,y.csv)("./data/hexmap.csv").then(function(t){var n=20,e=20,r=20,i=20,o=2e3-r-i,a=3e3-n-e,s=(0,d.select)(".vis-container").attr("width",3e3).attr("height",2e3);s.append("rect").attr("width","100%").attr("height","100%").attr("fill","#F5F5F5");var u=s.append("g").attr("class","map-container").attr("width",2*a/3).attr("height",o/2).attr("transform","translate("+a/3+","+r+")"),c=s.append("g").attr("class","density-container").attr("width",a/3).attr("height",o).attr("transform","translate("+n+","+r+")"),h=s.append("g").attr("class","scatterplot-container").attr("width",a/2.3).attr("height",o/3).attr("transform","translate("+(a/3+100)+","+(2*o/3+r)+")");(function(o){var a=o.attr("height")/7;(0,y.csv)("./data/hexmap.csv").then(function(t){var n=(0,x.scaleLinear)().domain([-1,0,1]).range(["blue","white","red"]),e=(0,p.getDomain)(t,"extremism_change"),r=(0,x.scaleLinear)().domain([-e.max,0,e.max]).range([1,.2,1]),i=o.append("g").attr("class","hex-wrapper").attr("transform","translate(100, 300)").selectAll(".state-hex").data(t).enter().append("g").attr("transform",function(t){var n=Number(t.HexRow),e=Number(t.HexCol),r=[a*(-2+e+.5*n),1+a*(.5*Math.sqrt(3)*n-.3)];return"translate("+r[0]+", "+r[1]+")"});i.append("path").attr("d",function(t){var n=a/2,e=a/Math.sqrt(3),r=e/2;return"M"+-n+","+r+"\n            l"+n+","+r+"\n            l"+n+","+-r+"\n            l0,"+-e+"\n            l"+-n+","+-r+"\n            l"+-n+","+r+" Z"}).attr("fill",function(t){return n(t.current_score)}).attr("stroke","black").attr("stroke-width","2");i.append("text").attr("class","state-hex-label").attr("x",0).attr("y",20+a/Math.sqrt(3)/2).attr("text-anchor","middle").attr("font-size",40).attr("font-family","Nunito").text(function(t){return t.StateAbbr}),i.append("line").attr("x1","0").attr("y1",function(t){return a/Math.sqrt(3)/2*-t.extremism_change*3}).attr("x2",function(t){return 4*(a/2)/5}).attr("y2","0").attr("stroke","black").attr("opacity",function(t){return r(t.extremism_change)}).attr("stroke-width",10),i.append("line").attr("x1","0").attr("y1",function(t){return a/Math.sqrt(3)/2*-t.extremism_change*3}).attr("x2",function(t){return-4*(a/2)/5}).attr("y2","0").attr("stroke","black").attr("opacity",function(t){return r(t.extremism_change)}).attr("stroke-width",10)})})(u),function(m){(0,y.csv)("./data/density_data.csv").then(function(t){var i=(0,x.scaleOrdinal)().domain(["-1","0","1"]).range([0,350,700]),o=(m.attr("height")-220)/15,a=210,s=220+o/2,u=220+o-10+1,v=220+3*o/4;t.forEach(function(t){var c,n,h,l,f,p,d,y,_,g,e=[t.D_nominate_dim1,t.R_nominate_dim1],r=m.append("g");c=r,n=e,h=30,l=s,f=a,p=o,d=(0,x.scaleLinear)().domain([-1,1]).range([0,700]),y=(0,x.scaleLinear)().domain([0,1]).range([50,0]),_=["#0000ff","#ff0000"],g=["#000069","#670101"],n.forEach(function(t,n){var e=t.slice(1,t.length-1).split(", ").map(function(t){return Number(t)}),r=(0,b.range)(-1,1,.01),i=k.stats.kde().sample(e),o=(0,M.line)().x(function(t){return d(t[0])}).y(function(t){return y(t[1])});c.append("path").attr("stroke-width",.5).attr("fill",_[n]).attr("fill-opacity",.5).attr("d",o(i(r))).attr("transform","translate ("+h+", "+l+")"),e.sort(function(t,n){return t-n});var a=Math.floor((e.length-1)/2),s=Math.ceil((e.length-1)/2),u=(e[a]+e[s])/2;c.append("line").attr("x1",d(u)).attr("x2",d(u)).attr("y1",f).attr("y2",f+p).attr("stroke-width",6).attr("stroke",g[n]).attr("stroke-dasharray",5).attr("transform","translate("+h+",0)")}),r.append("g").call((0,w.axisBottom)(i)).attr("transform","translate (30, "+u+")").attr("font-size",25).attr("font-family","Nunito"),r.append("text").text(""+t.year).attr("transform","translate (0, "+v+")").attr("font-size",30).attr("font-family","Nunito"),u+=o,s+=o,v+=o,a+=o});m.append("g").html('<text id="wrapped-density-text" font-size="35"\n       font-family="Nunito" text-anchor="middle">\n       <tspan x="400" y="50">These plots show the density distributions of DW-</tspan>\n       <tspan x="400" y="90">NOMINATE scores for each party (<tspan fill="blue">Democrat</tspan>,\n         <tspan x="400" y="130"><tspan fill="red">Republican</tspan>).\n         While the median scores for each</tspan>\n       <tspan x="400" y="170">party have not shifted much, the distributions\n       </tspan><tspan x="400" y="210">have diverged greatly.\n       </tspan></text>').attr("transform","translate(0,-20)")})}(c),function(p){(0,y.csv)("./data/scatterplot_df_data.csv").then(function(t){var n,e,r,i,o,a,s,u,c={left:50,right:100,top:50,bottom:50},h=(0,x.scaleBand)().domain(t.map(function(t){return t.starting_yr})).rangeRound([c.left,p.attr("width")-c.right]).padding([.1]),l=(0,x.scaleLinear)().domain([(0,b.min)(t,function(t){return t.polarization_percentage})-1,(0,b.max)(t,function(t){return t.polarization_percentage})+1]).range([p.attr("height")-c.top-c.bottom-50,0]).nice(),f=(0,M.line)().x(function(t){return h(t.starting_yr)}).y(function(t){return l(t.polarization_percentage)});p.append("path").attr("transform","translate("+1.24*h.bandwidth()+","+p.attr("height")/12+")").attr("stroke","orange").attr("stroke-width",5).attr("fill","none").attr("d",f(t)),p.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").attr("r",15).attr("cx",function(t){return h(t.starting_yr)+1.24*h.bandwidth()}).attr("cy",function(t){return l(t.polarization_percentage)+p.attr("height")/12}).attr("fill","orange"),e=h,r=c,i="Starting Year Of Congressional Term",(n=p).append("g").attr("class","xAxis").attr("transform","translate("+r.left+","+(n.attr("height")-r.top-r.bottom)+")").call((0,w.axisBottom)(e)).attr("font-size",30).attr("font-family","Nunito").append("text").attr("x",(n.attr("width")-r.left-r.right)/2+r.left).attr("y",r.bottom+50).attr("fill","#000").attr("text-anchor","middle").attr("font-size","40").attr("font-family","Nunito").text(i),a=l,s=c,u="Polarization Percentage",(o=p).append("g").attr("class","yAxis").attr("transform","translate("+2*s.left+","+s.top+")").call((0,w.axisLeft)(a)).attr("font-size",30).attr("font-family","Nunito").append("text").attr("transform","rotate(-90)").attr("x",s.top-(o.attr("height")-s.bottom)/1.9).attr("y",o.attr("x")-80).attr("fill","#000").attr("text-anchor","middle").attr("font-size","40").attr("font-family","Nunito").text(u),(0,d.select)(".xAxis").selectAll(".tick > line").attr("y1",function(t){return-1*(o.attr("height")-s.top-s.bottom-50)}).attr("stroke","grey").attr("stroke-width",.8),(0,d.select)(".yAxis").selectAll(".tick > line").attr("x1",function(t,n){return 13<n?0:o.attr("width")-s.right-s.left}).attr("stroke","grey").attr("stroke-width",.8),(0,d.selectAll)(".tick").attr("opacity",function(t,n){return n%2})})}(h),s.append("text").attr("class","main-title").attr("x",2*a/3.175).attr("y",75).attr("text-anchor","middle").attr("font-size",75).attr("font-family","Nunito").text("Political Polarization in the U.S., 1987-2017"),s.append("text").attr("class","main-title-byline").attr("x",2*a/3.175).attr("y",150).attr("text-anchor","middle").attr("font-size",50).attr("font-family","Nunito").text("Masha Boyarinova, Lily Li, and Jacob Spiegel");s.append("g").html('<text id="wrapped-density-text" font-size="35"\n   font-family="Nunito" text-anchor="middle">\n   <tspan x="400" y="50">Recently, the country has felt more fractured than ever,\n    but is this actually true? We answer this question by using</tspan>\n   <tspan x="400" y="90">Congressional DW-NOMINATE scores from\n   1987 to 2017. DW-NOMINATE is a spatial model that places politicians</tspan>\n   <tspan x="400" y="130">on a -1 to 1 scale, representing the liberal-conservative scale.\n   We examine political polarization\n   via three lenses:</tspan>\n   <tspan x="400" y="170">density plots that show the changes in the distribution of scores across</tspan>\n   <tspan x="400" y="210">congressional terms, a U.S. map that shows changes in each state, and a</tspan>\n   <tspan x="400" y="250">scatterplot that shows the nature of the change. Together, these graphics</tspan>\n   <tspan x="400" y="290">confirm that polarization is increasing in the U.S.</tspan>\n   </text>').attr("transform","translate(1450, 175)");var l=(0,_.annotationCustomType)(_.annotationCalloutElbow,{connector:{type:"elbow",end:"arrow"}}),f=(0,_.annotation)().type(l).textWrap(300).annotations([{note:{label:"The angle and opacity of the arrow denote change in extremism\n      between 1987 and 2007 (upwards is more extreme, downwards is less)",title:"Arrow"},x:2450,y:1120,dy:-100,dx:222},{note:{label:"The abbreviation of the state name",title:"Abbreviation"},x:2445,y:1175,dy:365,dx:130},{note:{label:"Color denotes the political leaning of the state in 2017\n      (blue = Democrat, red = Republican, white = split)",title:"Color"},x:2453,y:1150,dy:30,dx:215},{note:{label:"This tile represents the median U.S. state",title:"Median State"},x:2417,y:1215,dy:515,dx:0}]);(0,d.select)("svg").append("g").attr("class","annotation-group").attr("className","annotation").attr("font-family","Nunito").attr("font-size","35").call(f),(0,d.selectAll)(".annotation path").attr("stroke","#000").attr("stroke-width","2"),(0,d.selectAll)(".annotation text").attr("fill","#000"),(0,d.selectAll)(".connector-arrow").attr("fill","#000")})})},{"./utils":20,"d3-array":1,"d3-axis":2,"d3-fetch":6,"d3-scale":10,"d3-selection":11,"d3-shape":12,"d3-svg-annotation":13,domready:16,science:17}],20:[function(t,n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDomain=function(t,e){return t.reduce(function(t,n){return{min:Math.min(t.min,n[e]),max:Math.max(t.max,n[e])}},{min:1/0,max:-1/0})}},{}]},{},[19]);